/*! For license information please see main.min.js.LICENSE.txt */
(()=>{"use strict";var e,t={5386:(e,t,n)=>{n(193),n(853),n(5054),n(6364),n(6632),n(1928),n(4883),n(5007),n(8995),n(2729),n(3694),n(4063),n(2031),n(6908),n(6208),n(4994),n(8821),n(6650),n(9275),n(3528),n(5281),n(3214),n(7838),n(5252),n(2321),n(2798),n(4845);var o=n(6075),r=n(5435),i=n(8345),a=n(8012),c=n(3934),s=n(981),l=n(4418),u=n(9352),d=n(3789),p=n(6993),f=n(5442);n(3130),n(3382),n(5005),n(3290),n(4130),n(644);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t="function"==typeof Map?new Map:void 0;return w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return x(e,arguments,B(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),O(o,e)},w(e)}function x(e,t,n){return x=k()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&O(r,n.prototype),r},x.apply(null,arguments)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(s,e);var t,n,r,i,a,c=(t=s,n=k(),function(){var e,o=B(t);if(n){var r=B(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return v(this,e)});function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=c.call(this)).camera=e,n.options=Object.assign({size:90,padding:8,bubbleSizePrimary:8,bubbleSizeSeconday:6,showSecondary:!0,lineWidth:2,fontSize:"11px",fontFamily:"arial",fontWeight:"bold",fontColor:"#151515",fontYAdjust:0,colors:{x:["#f73c3c","#942424"],y:["#6ccb26","#417a17"],z:["#178cf0","#0e5490"]}},t),n.onAxisSelected=null,n.bubbles=[{axis:"X",direction:new o.Pa4(1,0,0),size:n.options.bubbleSizePrimary,color:n.options.colors.x,line:n.options.lineWidth,label:"X"},{axis:"Y",direction:new o.Pa4(0,1,0),size:n.options.bubbleSizePrimary,color:n.options.colors.y,line:n.options.lineWidth,label:"Y"},{axis:"Z",direction:new o.Pa4(0,0,1),size:n.options.bubbleSizePrimary,color:n.options.colors.z,line:n.options.lineWidth,label:"Z"},{axis:"-X",direction:new o.Pa4(-1,0,0),size:n.options.bubbleSizeSeconday,color:n.options.colors.x},{axis:"-Y",direction:new o.Pa4(0,-1,0),size:n.options.bubbleSizeSeconday,color:n.options.colors.y},{axis:"-Z",direction:new o.Pa4(0,0,-1),size:n.options.bubbleSizeSeconday,color:n.options.colors.z}],n.center=new o.Pa4(n.options.size/2,n.options.size/2,0),n.selectedAxis=null,n.innerHTML="<canvas width='"+n.options.size+"' height='"+n.options.size+"'></canvas>",n.id="gizmo",n.onMouseMove=n.onMouseMove.bind(g(n)),n.onMouseOut=n.onMouseOut.bind(g(n)),n.onMouseClick=n.onMouseClick.bind(g(n)),n}return r=s,i=[{key:"connectedCallback",value:function(){this.canvas=this.querySelector("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("mousemove",this.onMouseMove,!1),this.canvas.addEventListener("mouseout",this.onMouseOut,!1),this.canvas.addEventListener("click",this.onMouseClick,!1)}},{key:"disconnectedCallback",value:function(){this.canvas.removeEventListener("mousemove",this.onMouseMove,!1),this.canvas.removeEventListener("mouseout",this.onMouseOut,!1),this.canvas.removeEventListener("click",this.onMouseClick,!1)}},{key:"onMouseMove",value:function(e){var t=this.canvas.getBoundingClientRect();this.mouse=new o.Pa4(e.clientX-t.left,e.clientY-t.top,0)}},{key:"onMouseOut",value:function(e){this.mouse=null}},{key:"onMouseClick",value:function(e){this.onAxisSelected&&"function"==typeof this.onAxisSelected&&this.onAxisSelected(this.selectedAxis.axis)}},{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000";this.context.beginPath(),this.context.arc(e.x,e.y,t,0,2*Math.PI,!1),this.context.fillStyle=n,this.context.fill(),this.context.closePath()}},{key:"drawLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000";this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.lineWidth=n,this.context.strokeStyle=o,this.context.stroke(),this.context.closePath()}},{key:"update",value:function(){this.clear();var e,t=(new o.yGw).makeRotationFromEuler(this.camera.rotation).clone().invert(),n=y(this.bubbles);try{for(n.s();!(e=n.n()).done;)(l=e.value).position=this.getBubblePosition(l.direction.clone().applyMatrix4(t))}catch(e){n.e(e)}finally{n.f()}var r=[];for(var i in this.bubbles)!0!==this.options.showSecondary&&"-"===i[0]||r.push(this.bubbles[i]);if(r.sort((function(e,t){return e.position.z>t.position.z?1:-1})),this.selectedAxis=null,this.mouse){var a,c=1/0,s=y(r);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=this.mouse.distanceTo(l.position);(u<c||u<l.size)&&(c=u,this.selectedAxis=l)}}catch(e){s.e(e)}finally{s.f()}}this.drawLayers(r)}},{key:"drawLayers",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,r=o.color;r=this.selectedAxis===o?"#FFFFFF":o.position.z>=-.01?o.color[0]:o.color[1],this.drawCircle(o.position,o.size,r),o.line&&this.drawLine(this.center,o.position,o.line,r),o.label&&(this.context.font=[this.options.fontWeight,this.options.fontSize,this.options.fontFamily].join(" "),this.context.fillStyle=this.options.fontColor,this.context.textBaseline="middle",this.context.textAlign="center",this.context.fillText(o.label,o.position.x,o.position.y+this.options.fontYAdjust))}}catch(e){n.e(e)}finally{n.f()}}},{key:"getBubblePosition",value:function(e){return new o.Pa4(e.x*(this.center.x-this.options.bubbleSizePrimary/2-this.options.padding)+this.center.x,this.center.y-e.y*(this.center.y-this.options.bubbleSizePrimary/2-this.options.padding),e.z)}}],i&&b(r.prototype,i),a&&b(r,a),Object.defineProperty(r,"prototype",{writable:!1}),s}(w(HTMLElement));function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}window.customElements.define("orientation-gizmo",S);var j=E((function e(t){var n,o,r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mouseMoved,t.addEventListener("mousedown",(function(e){n=e.clientX,o=e.clientY,r=Date.now()})),t.addEventListener("mouseup",(function(e){var t=Math.abs(e.clientX-n),a=Math.abs(e.clientY-o),c=r-Date.now();i.mouseMoved=t>5||a>5||c>500}))}));n(5862),n(9457),n(6900),n(7751),n(238);function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var C=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.camera=n,this.meshes=r,this.mouse=new o.FM8,this.raycaster=new o.iMs,this.intersects}var t,n,r;return t=e,(n=[{key:"findIntersect",value:function(){this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.firstHitOnly=!0,this.raycaster.layers.set(1),this.intersects=this.raycaster.intersectObjects(this.meshes,!1)}}])&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var M=L((function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var c=i||"./textures/circle.png",s=a||.02,l=(new o.dpR).load(c),u=new o.xeV({map:l,transparent:!0,depthTest:!1,depthWrite:!1,sizeAttenuation:!1}),d=new o.jyi(u);return d.position.set(t,n,r),d.scale.setScalar(s),d}));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=F(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},_.apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=W(e);if(t){var r=W(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(a,e);var t,n,r,i=V(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).propContentsID=o,c.jsonData=r,c.pickColorOn=!0,c.boxHelperOn=!0,c.labelOn=!0,c.propContentsOn=!0,c.propContents=document.getElementById(c.propContentsID),c.propContents.innerHTML="객체를 클릭하면 속성이 표기됨",c.scrollIntoViewElement=null,c.label=document.createElement("div"),c.label.id="label",c.label.style.position="absolute",c.label.style.display="inline-block",c.label.style.top="0rem",c.label.style.minWidth="35rem",c.label.style.padding="1rem",c.label.style.overflowY="auto",c.label.style.fontSize="1.4rem",c.label.style.color="white",c.label.style.background="rgba(0, 0, 0, 0.8)",c.labelCSS2D,c}return t=a,(n=[{key:"pick",value:function(){var e=this;if(this.scrollIntoViewElement&&(this.scrollIntoViewElement.style.background="",this.scrollIntoViewElement=null),this.scene.remove(this.pickCloneObj),this.scene.remove(this.pickBoxHelper),this.scene.remove(this.marker),this.scene.remove(this.labelCSS2D),this.propContents.innerHTML="객체를 클릭하면 속성이 표기됨",_(W(a.prototype),"findIntersect",this).call(this),this.intersects.length){if(this.pickObject=this.intersects[0].object,this.scrollIntoViewElement=document.getElementById("".concat(this.pickObject.uuid)),this.scrollIntoViewElement.scrollIntoView({behavior:"smooth"}),this.scrollIntoViewElement.style.background="#BDBDBD",this.pickColorOn){var t=new o.EJi({color:"#ff8747",roughness:.4,metalness:1,emissive:"red",side:2});this.pickCloneObj=this.pickObject.clone(),this.pickCloneObj.material=t,this.pickCloneObj.name="cloneObj",this.scene.add(this.pickCloneObj)}if(this.boxHelperOn&&(this.pickBoxHelper=new o.fQA(this.pickObject,"forestgreen"),this.scene.add(this.pickBoxHelper)),this.labelOn){this.marker=new M(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z),this.scene.add(this.marker),this.label.innerHTML="\n            Name : ".concat(this.pickObject.name," <br>\n            "),document.body.appendChild(this.label);var n=document.createElement("div");n.appendChild(this.label),this.labelCSS2D=new u.j(n),this.labelCSS2D.position.copy(this.intersects[0].point),this.scene.add(this.labelCSS2D)}var r;this.propContentsOn&&(this.propContents.innerHTML="",this.propContents.innerHTML+="\n            Id : ".concat(this.pickObject.id," <br>\n            Uuid : ").concat(this.pickObject.uuid," <br>\n            Point x : ").concat(this.intersects[0].point.x.toFixed(3)," <br>\n            Point y : ").concat(this.intersects[0].point.y.toFixed(3)," <br>\n            Point z : ").concat(this.intersects[0].point.z.toFixed(3)," <br>\n            Geometry Type : ").concat(this.pickObject.geometry.type," <br>\n            Material Name : ").concat(this.pickObject.material.name," <br>\n            Material Opacity : ").concat(this.pickObject.material.opacity," <br>\n            Texture MIME Type : ").concat((null===(r=this.pickObject.material.map)||void 0===r?void 0:r.userData.mimeType)||"없음"," <br><br>\n            ")),this.jsonData[0]&&(this.jsonValues=Object.values(this.jsonData[0]),this.jsonValues.forEach((function(t,n){if(t.name===e.pickObject.name)for(var o=0,r=Object.entries(t);o<r.length;o++){var i=A(r[o],2),a=i[0],c=i[1];e.propContents.innerHTML+="".concat(a,": ").concat(c," <br>")}})))}}}])&&R(t.prototype,n),r&&R(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var N=function(){function e(t,n,o,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.meshes=n,this.camera=o,this.controls=r,this.meshListID=i,this.listElement=document.getElementById(this.meshListID),this.listElement.innerHTML="",this.fragment=document.createDocumentFragment();for(var a=0;a<this.meshes.length;a++)this.addList(this.meshes[a].name,this.meshes[a].uuid);this.listElement.append(this.fragment)}var t,n,o;return t=e,(n=[{key:"addList",value:function(e,t){var n=this,o=this.scene.getObjectByProperty("uuid",t);this.item=document.createElement("div"),this.item.className="item",this.item.id=t,this.fragment.appendChild(this.item);var r=document.createElement("div");r.className="item_name",r.name=e,r.textContent=e,this.item.append(r);var i=document.createElement("div");i.className="item_btnContainer";var a=document.createElement("input");a.type="checkbox",a.checked="true",a.id="label"+t,a.setAttribute("uuid",t),a.addEventListener("click",(function(e){n.onVisible(e)})),i.appendChild(a);var c=document.createElement("label");c.htmlFor="label"+t,c.name=e,c.style.width="2.5rem",i.appendChild(c),this.item.append(i);var s=document.createElement("input");s.className="item_colour",s.placeholder="color",s.type="color",s.value="#"+o.material.color.getHexString(),s.setAttribute("uuid",t),s.addEventListener("input",(function(e){return n.changeColor(e)})),i.append(s);var l=document.createElement("input");l.name=e,l.type="text",l.value=100,l.setAttribute("uuid",t),l.addEventListener("change",(function(e){return n.opcaityChange(e)})),i.appendChild(l)}},{key:"changeColor",value:function(e){var t=e.target.getAttribute("uuid");this.scene.getObjectByProperty("uuid",t).material.color.set(e.target.value)}},{key:"onVisible",value:function(e){var t=e.target.getAttribute("uuid"),n=this.scene.getObjectByProperty("uuid",t);switch(e.target.checked){case!0:n.visible=!0,n.layers.enable(1);break;case!1:n.visible=!1,n.layers.disable(1),this.scene.remove(this.scene.getObjectByName("cloneObj"))}}},{key:"opcaityChange",value:function(e){var t=e.target.getAttribute("uuid"),n=this.scene.getObjectByProperty("uuid",t),o=+e.target.value;o=o>100?100:o<1?1:o,e.target.value=o,n.material.transparent=!0,n.material.opacity=e.target.value/100,100==e.target.value&&(n.material.transparent=!1)}}])&&Z(t.prototype,n),o&&Z(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var K=U((function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.viewMode=n,this.camera=r,this.controls=i,this.box=(new o.ZzF).setFromObject(this.model),this.sizeBox=this.box.getSize(new o.Pa4).length(),this.centerBox=this.box.getCenter(new o.Pa4);var a=0,c=0,s=0;switch(this.viewMode){case"X":a=1;break;case"Y":c=1;break;case"Z":s=1;break;case"-X":a=1,a*=-1;break;case"-Y":c=1,c*=-1;break;case"-Z":s=1,s*=-1}this.camera.position.set(this.centerBox.x+a,this.centerBox.y+c,this.centerBox.z+s);var l=.5*this.sizeBox,u=Math.PI/180*(.5*this.camera.fov),d=l/Math.tan(u),p=(new o.Pa4).subVectors(this.camera.position,this.centerBox).normalize().multiplyScalar(d).add(this.centerBox);this.camera.position.copy(p),this.camera.near=Math.min(this.sizeBox/100,.1),this.camera.far=3*d,this.camera.updateProjectionMatrix(),this.camera.lookAt(this.centerBox.x,this.centerBox.y,this.centerBox.z),this.controls.target.set(this.centerBox.x,this.centerBox.y,this.centerBox.z),this.controls.minDistanceSettingValue=d/20}));function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=$(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},q.apply(this,arguments)}function $(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=oe(e);if(t){var r=oe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(a,e);var t,n,r,i=te(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).renderer=o,c.pickState=r,c.pickColorOn=!0,c.labelOn=!0,c.pickObjectSaveMaterial=0,c.pickObject=null,c}return t=a,(n=[{key:"pick",value:function(){this.pickState.flag="volume",this.renderer.domElement.style.cursor="crosshair"}},{key:"calVol",value:function(){var e=this;if(q(oe(a.prototype),"findIntersect",this).call(this),this.intersects.length){if(this.pickObject=this.intersects[0].object,this.pickColorOn){this.pickObjectSaveMaterial=this.pickObject.material;var t=new o.EJi({color:"skyblue",roughness:.5,metalness:1,side:2});this.pickObject.material=t}if(this.labelOn){this.marker=new M(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z),this.scene.add(this.marker),this.label=document.createElement("div"),this.label.id="volLabel",this.label.innerHTML=ie(this.pickObject.geometry).toFixed(3)+" ㎥",this.label.style.top="0rem",this.label.style.position="absolute",this.label.style.display="inline-block",this.label.style.minWidth="18rem",this.label.style.padding="0.5rem",this.label.style.overflowY="auto",this.label.style.fontSize="1.4rem",this.label.style.fontFamily="sans-serif",this.label.style.color="white",this.label.style.background="skyblue";var n=document.createElement("div");n.appendChild(this.label),this.labelCSS2D=new u.j(n),this.labelCSS2D.position.copy(this.intersects[0].point),this.scene.add(this.labelCSS2D)}setTimeout((function(){alert("체적 = ".concat(ie(e.pickObject.geometry).toFixed(3)," ㎥")),e.pickObject&&e.pickColorOn&&(e.pickObject.material=e.pickObjectSaveMaterial,e.pickObject=null),e.scene.remove(e.labelCSS2D),e.scene.remove(e.marker),e.pickState.flag="pick"}),200),this.renderer.domElement.style.cursor="default"}}}])&&Q(t.prototype,n),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function ie(e){if(!e.isBufferGeometry)return 0;var t=null!==e.index,n=e.attributes.position,r=0,i=new o.Pa4,a=new o.Pa4,c=new o.Pa4;if(t)for(var s=e.index,l=s.count/3,u=0;u<l;u++)i.fromBufferAttribute(n,s.array[3*u+0]),a.fromBufferAttribute(n,s.array[3*u+1]),c.fromBufferAttribute(n,s.array[3*u+2]),r+=ae(i,a,c);else for(var d=n.count/3,p=0;p<d;p++)i.fromBufferAttribute(n,3*p+0),a.fromBufferAttribute(n,3*p+1),c.fromBufferAttribute(n,3*p+2),r+=ae(i,a,c);return r}function ae(e,t,n){return e.dot(t.cross(n))/6}function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function le(){return le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=ue(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},le.apply(this,arguments)}function ue(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=he(e);if(t){var r=he(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return fe(this,n)}}function fe(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(a,e);var t,n,r,i=pe(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).renderer=o,c.pickState=r,c.pickColorOn=!0,c.labelOn=!0,c.pickObjectSaveMaterial=null,c.pickObject=null,c}return t=a,(n=[{key:"pick",value:function(){this.renderer.domElement.style.cursor="crosshair",this.pickState.flag="area"}},{key:"calArea",value:function(){var e=this;if(le(he(a.prototype),"findIntersect",this).call(this),this.intersects.length){if(this.pickObject=this.intersects[0].object,this.pickColorOn){this.pickObjectSaveMaterial=this.pickObject.material;var t=new o.EJi({color:"orange",roughness:.5,metalness:1,side:2});this.pickObject.material=t}if(this.labelOn){this.marker=new M(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z),this.scene.add(this.marker),this.label=document.createElement("div"),this.label.id="areaLabel",this.label.innerHTML=me(this.pickObject.geometry).toFixed(3)+" ㎡",this.label.style.position="absolute",this.label.style.display="inline-block",this.label.style.top="0rem",this.label.style.minWidth="18rem",this.label.style.padding="0.5rem",this.label.style.overflowY="auto",this.label.style.fontSize="1.4rem",this.label.style.fontFamily="sans-serif",this.label.style.color="white",this.label.style.background="orange";var n=document.createElement("div");n.appendChild(this.label),this.labelCSS2D=new u.j(n),this.labelCSS2D.position.copy(this.intersects[0].point),this.scene.add(this.labelCSS2D)}setTimeout((function(){alert("면적 = ".concat(me(e.pickObject.geometry).toFixed(3)," ㎡")),e.pickObject&&e.pickColorOn&&(e.pickObject.material=e.pickObjectSaveMaterial,e.pickObject=null),e.scene.remove(e.labelCSS2D),e.scene.remove(e.marker),e.pickState.flag="pick"}),200),this.renderer.domElement.style.cursor="default"}}}])&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function me(e){var t=e;function n(e,t,n){var r=new o.Pa4,i=new o.Pa4;r=e.clone().sub(t),i=e.clone().sub(n);var a=new o.Pa4;return a.crossVectors(r,i),a.length()/2}for(var r=0,i=new o.Pa4,a=new o.Pa4,c=new o.Pa4,s=0;s<t.index.count/3;s++){var l=t.attributes.position,u=t.index.array;i.fromBufferAttribute(l,u[3*s+0]),a.fromBufferAttribute(l,u[3*s+1]),c.fromBufferAttribute(l,u[3*s+2]),r+=n(i,a,c)}return r}function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ve(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ge(){return ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=we(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},ge.apply(this,arguments)}function we(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Be(e)););return e}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Be(e);if(t){var r=Be(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(a,e);var t,n,r,i=ke(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).renderer=o,c.pickState=r,c.lineDrawing=!1,c.dimLine,c.dimTextLabel,c.delBtnLabel,c.counter=0,c.infoBackspaceDiv=document.createElement("button"),c.infoBackspaceDiv.style.position="absolute",c.infoBackspaceDiv.style.top="9rem",c.infoBackspaceDiv.style.left="50%",c.infoBackspaceDiv.style.display="none",c.infoBackspaceDiv.style.transform="translate( -50% )",c.infoBackspaceDiv.style.border="1px solid #ccc",c.infoBackspaceDiv.style.borderRadius="1.9rem",c.infoBackspaceDiv.style.textAlign="center",c.infoBackspaceDiv.style.background="white",c.infoBackspaceDiv.style.opacity="0.9",c.infoBackspaceDiv.style.color="black",c.infoBackspaceDiv.style.fontSize="1.4rem",c.infoBackspaceDiv.style.padding="1rem",c.infoBackspaceDiv.style.cursor="pointer",c.infoBackspaceDiv.style.zIndex="1000",c.infoBackspaceDiv.addEventListener("mouseover",(function(){c.infoBackspaceDiv.style.background="#ccc"})),c.infoBackspaceDiv.addEventListener("mouseout",(function(){c.infoBackspaceDiv.style.background="inherit"})),c.infoBackspaceDiv.addEventListener("click",(function(){return c.del()})),document.body.appendChild(c.infoBackspaceDiv),c}return t=a,(n=[{key:"dist",value:function(){this.renderer.domElement.style.cursor="crosshair",this.pickState.flag="dim"}},{key:"start",value:function(){if(ge(Be(a.prototype),"findIntersect",this).call(this),this.intersects.length)if(this.lineDrawing){var e=this.dimLine.geometry.attributes.position.array;e[3]=this.intersects[0].point.x,e[4]=this.intersects[0].point.y,e[5]=this.intersects[0].point.z,this.dimLine.geometry.attributes.position.needsUpdate=!0;var t=new M(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z);t.name="endMarker"+this.counter,this.scene.add(t),this.lineDrawing=!1,this.pickState.flag="pick",this.renderer.domElement.style.cursor="default",1==this.counter&&(this.infoBackspaceDiv.style.display="block",this.infoBackspaceDiv.innerHTML='<span style="color:#1c5c4c; font-weight:bold">거리측정 삭제</span>')}else{this.counter=this.counter>=0?this.counter:0,this.counter++;var n=[];n.push(this.intersects[0].point),n.push(this.intersects[0].point.clone());var r=new M(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z);r.name="startMarker"+this.counter,this.scene.add(r);var i=(new o.u9r).setFromPoints(n),c=new o.nls({color:"black",depthTest:!1,depthWrite:!1});this.dimLine=new o.ejS(i,c),this.dimLine.frustumCulled=!1,this.dimLine.name="dimLine"+this.counter,this.scene.add(this.dimLine);var s=document.createElement("div");s.innerText="0.0m",s.addEventListener("click",(function(){})),s.style.pointerEvents="auto",s.style.fontSize="1.4rem",s.style.fontFamily="sans-serif",s.style.background="black",s.style.color="white",this.dimTextLabel=new u.j(s),this.dimTextLabel.name="dimTextLabel"+this.counter,this.dimTextLabel.position.copy(this.intersects[0].point),this.scene.add(this.dimTextLabel),this.lineDrawing=!0}}},{key:"drawing",value:function(){if(this.lineDrawing&&(ge(Be(a.prototype),"findIntersect",this).call(this),this.intersects.length)){var e=this.dimLine.geometry.attributes.position.array,t=new o.Pa4(e[0],e[1],e[2]),n=new o.Pa4(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z);e[3]=this.intersects[0].point.x,e[4]=this.intersects[0].point.y,e[5]=this.intersects[0].point.z,this.dimLine.geometry.attributes.position.needsUpdate=!0;var r=t.distanceTo(n);this.dimTextLabel.element.innerText=r.toFixed(2)+"m",this.dimTextLabel.position.lerpVectors(t,n,.5)}}},{key:"del",value:function(){var e=this.scene.getObjectByName("dimLine".concat(this.counter)),t=this.scene.getObjectByName("dimTextLabel".concat(this.counter)),n=this.scene.getObjectByName("startMarker".concat(this.counter)),o=this.scene.getObjectByName("endMarker".concat(this.counter));this.scene.remove(e),this.scene.remove(t),this.scene.remove(n),this.scene.remove(o),this.counter=this.counter-1,0==this.counter&&(this.infoBackspaceDiv.style.display="none")}}])&&ve(t.prototype,n),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function je(){return je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=ze(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},je.apply(this,arguments)}function ze(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Me(e);if(t){var r=Me(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Le(this,n)}}function Le(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(a,e);var t,n,r,i=Ie(a);function a(e,t,n,o,r,c,s,l){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this,e,t,n)).renderer=o,u.controls=r,u.pickState=c,u.fileArr=s,u.func=l,u.savePos={controls:null,camera:null},u}return t=a,n=[{key:"pick",value:function(){this.pickState.flag="markUp",this.renderer.domElement.style.cursor="crosshair"}},{key:"load",value:function(e,t){this.dataName=e[0],this.dataPos=e[1];var n=new M(this.dataPos.x,this.dataPos.y,this.dataPos.z,"./textures/pin-3.png",.05),r=document.createElement("div");r.textContent=this.dataName,r.style.cssText="position: absolute; top: 1.5rem; left: -5rem; display: inline; text-align: center; width: 10rem; padding: 0.5rem; border-radius: .5rem; font-size: 1rem; background: rgba(0, 0, 0, 0.5); color: white; pointer-events: auto;",r.addEventListener("click",(function(){t(e)})),r.addEventListener("mouseover",(function(){r.style.background="#ccc"})),r.addEventListener("mouseout",(function(){r.style.background="rgba(0, 0, 0, 0.5)"}));var i=document.createElement("div");i.appendChild(r);var a=new u.j(i);a.position.set(this.dataPos.x,this.dataPos.y,this.dataPos.z);var c=new o.ZAu;return c.add(n),c.add(a),c}},{key:"add",value:function(){if(je(Me(a.prototype),"findIntersect",this).call(this),this.intersects.length){this.getCameraPosition(),this.renderer.render(this.scene,this.camera);var e=this.renderer.domElement.toDataURL("image/png",.955),t={fileArr:this.fileArr,markX:this.intersects[0].point.x,markY:this.intersects[0].point.y,markZ:this.intersects[0].point.z,cameraX:this.savePos.camera.x,cameraY:this.savePos.camera.y,cameraZ:this.savePos.camera.z,controlsX:this.savePos.controls.x,controlsY:this.savePos.controls.y,controlsZ:this.savePos.controls.z,imageUrl:e};this.func(t),this.pickState.flag="pick",this.renderer.domElement.style.cursor="default"}}},{key:"getCameraPosition",value:function(){this.savePos.controls=this.controls.target.clone(),this.savePos.camera=this.controls.object.position.clone()}},{key:"movePos",value:function(){this.camera.position.set(this.savePos.camera.x,this.savePos.camera.y,this.savePos.camera.z),this.controls.target.set(this.savePos.controls.x,this.savePos.controls.y,this.savePos.controls.z)}}],n&&Ee(t.prototype,n),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function De(){De=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var r=t&&t.prototype instanceof d?t:d,i=Object.create(r.prototype),a=new O(o||[]);return i._invoke=function(e,t,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return S()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=l(e,t,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function d(){}function p(){}function f(){}var h={};c(h,r,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(B([])));m&&m!==t&&n.call(m,r)&&(h=m);var b=f.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function o(r,i,a,c){var s=l(e[r],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==Ae(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var r;this._invoke=function(e,n){function i(){return new t((function(t,r){o(e,n,t,r)}))}return r=r?r.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function B(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=f,c(b,"constructor",f),c(f,"constructor",p),p.displayName=c(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(g.prototype),c(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new g(s(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(b),c(b,a,"Generator"),c(b,r,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=B,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Re(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ve(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function _e(e,t,n,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function Fe(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){_e(i,o,r,a,c,"next",e)}function c(e){_e(i,o,r,a,c,"throw",e)}a(void 0)}))}}function He(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}o.u9r.prototype.computeBoundsTree=i.Xy,o.u9r.prototype.disposeBoundsTree=i.sn,o.Kj0.prototype.raycast=i.uL,function(e,t){var n,i,h,y,m,b,v,g,w,x,k,O,B,P,E={menu:!0,path:"./models/",url:[],json:null,canvasID:"three-canvas",exposure:1.5,ambientLight:!0,ambientIntensity:.3,lightCamera:!0,lightCameraIntensity:1,lightScene:!0,lightSceneIntensity:1,autoRotate:!1,autoRotateSpeed:-3,mapControl:!0,navigationGizmo:!0,environment:!1,materialSide:2,castShadow:!0,receiveShadow:!1,shadowMap:!0,viewMode:"Y",gridVisible:!1,axesVisible:!1,meshListID:"listOnOff",pickColorOn:!0,boxHelperOn:!0,labelOn:!0,propContentsOn:!0,propContentsID:"propContents",raycastAcc:!1,characterVisible:!0,playerRun:!1},z=[];E.url.forEach((function(e){return z.push(e)})),He(new URLSearchParams(window.location.search)).forEach((function(e,t){"true"==e[1]&&(e[1]=!0),"false"==e[1]&&(e[1]=!1),E[e[0]]=e[1],"url"===e[0]&&z.push(e[1]),"json"===e[0]&&(E.json,e[1])})),function(){n=document.getElementById(E.canvasID),(i=new o.CP7({canvas:n,alpha:!0,antialias:!0,logarithmicDepthBuffer:!0})).setSize(window.innerWidth,window.innerHeight),i.setPixelRatio(window.devicePixelRatio>1?2:1),i.outputEncoding=o.knz,i.toneMapping=o.LY2,i.toneMappingExposure=E.exposure,i.physicallyCorrectLights=!0,i.localClippingEnabled=!0,i.shadowMap.enabled=!0,i.shadowMap.type=2,(h=new u.M).setSize(window.innerWidth,window.innerHeight),h.domElement.style.position="absolute",h.domElement.style.top="0px",h.domElement.style.pointerEvents="none",document.body.appendChild(h.domElement),y=new o.xsS;var e=new o.cBK;P=e.setPath("./textures/").load(["px-day.png","nx-day.png","py-day.png","ny-day.png","pz-day.png","nz-day.png"]),y.environment=y.background=E.environment?P:null;var t=window.innerWidth/window.innerHeight;b=new o.cPb(75,t,.1,1e3),(v=new o.iKG(window.innerWidth/-t,window.innerWidth/t,window.innerHeight/t,window.innerHeight/-t,.1,1e3)).zoom=1,(m=b).position.set(0,5,0),y.add(m);var r=new o.Mig("white",E.ambientIntensity);E.ambientLight?y.add(r):y.remove(r),g=new o.Ox3("white",E.lightCameraIntensity),E.lightCamera?m.add(g):m.remove(g),w=new o.Ox3("white",E.lightSceneIntensity),E.lightScene?y.add(w):y.remove(w),w.castShadow=!0,w.shadow.mapSize.width=128,w.shadow.mapSize.height=128,w.shadow.radius=10,(B=new o.Kj0).name="shadowPlane",y.add(B),(O=new o.VLJ).name="gridHelper",O.visible=!1,y.add(O),(k=new o.y8_).name="axesHelper",k.visible=!1,y.add(k),(x=new a.z(m,n)).autoRotate=E.autoRotate,x.autoRotateSpeed=E.autoRotateSpeed,x.screenSpacePanning=E.mapControl,x.zoomSpeed=.5,x.rotateSpeed=.7,x.panSpeed=.7,x.mouseButtons={LEFT:o.RsA.ROTATE,MIDDLE:o.RsA.DOLLY,RIGHT:o.RsA.PAN},x.touches={ONE:o.QmN.ROTATE,TWO:o.QmN.DOLLY_PAN};var c=(new o.dpR).load("./textures/target.png"),s=new o.xeV({map:c,transparent:!0,opacity:.5,depthTest:!1,depthWrite:!1,sizeAttenuation:!1});x.addEventListener("start",(function(){var e=new o.jyi(s);e.position.copy(x.target),e.scale.set(.07,.07,.07),e.name="controlsPoint",y.add(e)})),x.addEventListener("end",(function(){var e=y.getObjectByName("controlsPoint");y.remove(e)}))}();var I,L=!1,M=[],T=[],A=[],D=[],R=new s.a;R.setTranscoderPath("./basis/").detectSupport(i);var _=new c._;_.setDecoderPath("./draco/gltf/");var F=new l.E;F.setKTX2Loader(R),F.setDRACOLoader(_),F.setPath(E.path);var H=new o.ZAu;function V(e){return Y.apply(this,arguments)}function Y(){return(Y=Fe(De().mark((function e(t){var n;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return Z.apply(this,arguments)}function Z(){return(Z=Fe(De().mark((function e(t){var n,o;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.loadAsync(t,(function(e){return Ie(e,t)}));case 2:n=e.sent,(o=n.scene).name="glbUrlModelGroup",o.updateMatrixWorld(!0),U(o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Fe(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z.forEach((function(e,t){M.push(W(e))})),e.next=3,Promise.all(M);case 3:Je(z[0]),L=!0;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var t=[];e.traverse((function(e){e.isMesh&&(e.material.side=+E.materialSide,e.castShadow=E.castShadow,e.receiveShadow=E.receiveShadow,e.layers.enable(1),E.raycastAcc?e.geometry.computeBoundsTree():e.geometry.boundsTree=null,t.push(e))}));var n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});t.sort((function(e,t){return n.compare(e.name,t.name)})),t.forEach((function(e){A.push(e),D.push(e.material.map)})),A.forEach((function(e){return H.add(e)})),y.add(H),function(e){I=new K(e,E.viewMode,m,x),g.position.set(I.centerBox.x,I.box.max.y+2*I.centerBox.y,I.box.max.z),g.target.name="lightCameraTarget",g.target.position.copy(I.centerBox),g.target.updateMatrixWorld(),y.add(g.target),w.position.set(I.centerBox.x,I.box.max.y+2*I.centerBox.y,I.centerBox.z),w.target.name="lightSceneTarget",w.target.position.copy(I.centerBox),w.target.updateMatrixWorld(),y.add(w.target),w.shadow.camera.top=I.sizeBox,w.shadow.camera.bottom=-I.sizeBox,w.shadow.camera.left=-I.sizeBox,w.shadow.camera.right=I.sizeBox;new o.Rki(w.shadow.camera);y.remove(y.getObjectByName("shadowPlane"));var t=new o._12(2*I.sizeBox,2*I.sizeBox);t.rotateX(-Math.PI/2);var n=new o.Tn7({opacity:.4});(B=new o.Kj0(t,n)).name="shadowPlane",B.position.set(I.centerBox.x,I.box.min.y-2,I.centerBox.z),B.receiveShadow=E.shadowMap,y.add(B),y.remove(y.getObjectByName("gridHelper"));var r=2*I.sizeBox,i=20;(O=new o.VLJ(r,i)).name="gridHelper",O.position.x=I.centerBox.x,O.position.y=I.box.min.y-2,O.position.z=I.centerBox.z,O.visible=E.gridVisible,y.add(O),y.remove(y.getObjectByName("axesHelper")),(k=new o.y8_(I.sizeBox)).name="axesHelper",k.visible=E.axesVisible,y.add(k)}(H)}function J(){Ve.meshes=Ye.meshes=We.meshes=Xe.meshes=A,Ve.jsonData=T,dt=!0}function Q(){new N(y,A,m,x,E.meshListID),function(){document.getElementById("chkGridHelper").checked=E.gridVisible,document.getElementById("chkAxeSwitch").checked=E.axesVisible,document.getElementById("chkAutoRotate").checked=E.autoRotate,document.getElementById("chkCamera").checked=E.cameraOrthoMode,document.getElementById("chkShadow").checked=E.shadowMap,document.getElementById("chkMeshShadow").checked=E.receiveShadow,0===E.materialSide?document.getElementById("chkMeshSide").checked=!1:2===E.materialSide&&(document.getElementById("chkMeshSide").checked=!0);document.getElementById("chkEnvMap").checked=E.environment,document.getElementById("chkNaviGizmo").checked=E.navigationGizmo,document.getElementById("chkPickColor").checked=E.pickColorOn,document.getElementById("chkBoxHelper").checked=E.boxHelperOn,document.getElementById("chkLabel").checked=E.labelOn,document.getElementById("chkRaycastAcc").checked=E.raycastAcc,document.getElementById("chkCharacterVisible").checked=E.characterVisible,document.getElementById("chkPlayerRun").checked=E.playerRun}()}H.name="meshGroup",z.length&&function(){return G.apply(this,arguments)}().then(ze).then(Q).catch(Le),E.json&&V("./models/".concat(E.json)).then((function(e){return T.push(e)})).catch(Le),window.glbUrlImport=function(e,t){z.push(e),E.json=t||null,E.json&&V("./models/".concat(E.json)).then((function(e){return T.push(e)})).catch(Le),W(e).then(ze).then(J).then(Q).then((function(){document.getElementById("dropdown").style.display="none"})).catch(Le)};var q=document.getElementById(E.canvasID);function $(e){return new Promise((function(t,n){F.parse(e,"",(function(e){return t(e)}),n)}))}function ee(e){return te.apply(this,arguments)}function te(){return(te=Fe(De().mark((function e(t){var n,o;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:n=e.sent,(o=n.scene).name="dragDropGlbModel",U(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Fe(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(M);case 2:L=!0;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}q.addEventListener("dragover",(function(e){e.preventDefault(),this.style.backgroundColor="lightgray"})),q.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),L=!1;var t=e.dataTransfer.files;T=[],He(t).forEach((function(e,t){var n,o=e,r=o.name.split(".").pop().toLowerCase();"glb"==r&&M.push((n=o,new Promise((function(e,t){var o=new FileReader;o.onload=function(){return e(o.result)},o.readAsArrayBuffer(n),o.onprogress=function(e){e.loaded&&e.total&&(Ce(Math.min(e.loaded/e.total,1),n.name),je())}}))).then(ee)),"json"==r&&function(e){return new Promise((function(t,n){var o=new FileReader;o.onload=function(){return t(o.result)},o.readAsText(e)}))}(o).then((function(e){return T.push(JSON.parse(e))}))})),function(){return ne.apply(this,arguments)}().then(ze).then(J).then(Q).catch(Le),Je(t[0].name),this.style.backgroundColor="transparent"})),document.querySelector("#screenshot").addEventListener("click",(function(){i.render(y,m);var e=n.toDataURL("image/png",.95),t=document.getElementById("screenshotImg");t.src=e,t.style.cssText="width: 23rem; overflow:hidden; margin:0 auto;"}));var oe=new S(m);document.body.appendChild(oe),oe.onAxisSelected=function(e){switch(e){case"X":r.ZP.to(m.position,{x:I.box.max.x+I.sizeBox,y:I.centerBox.y,z:I.centerBox.z,duration:1});break;case"-X":r.ZP.to(m.position,{x:I.box.min.x-I.sizeBox,y:I.centerBox.y,z:I.centerBox.z,duration:1});break;case"Y":r.ZP.to(m.position,{x:I.centerBox.x,y:I.box.max.y+I.sizeBox,z:I.centerBox.z+1e-4*I.sizeBox,duration:1,onUpdate:function(){},onComplete:function(){}});break;case"-Y":r.ZP.to(m.position,{x:I.centerBox.x,y:I.box.min.y-I.sizeBox,z:I.centerBox.z+1e-4*I.sizeBox,duration:1});break;case"Z":r.ZP.to(m.position,{x:I.centerBox.x,y:I.centerBox.y,z:I.box.max.z+I.sizeBox,duration:1});break;case"-Z":r.ZP.to(m.position,{x:I.centerBox.x,y:I.centerBox.y,z:I.box.min.z-I.sizeBox,duration:1})}m.lookAt(I.centerBox.x,I.centerBox.y,I.centerBox.z),x.target.set(I.centerBox.x,I.centerBox.y,I.centerBox.z)},document.getElementById("gizmo").style.display=E.navigationGizmo?"block":"none";var ie,ae,ce,se,le,ue,de,pe=!1,fe=!1,he=new o.Pa4,me=new o.Pa4(0,1,0),be=new o.Pa4,ve=new o.Pa4,ge=new o.ZzF,we=new o.yGw,xe=new o.Zzh,ke=0,Oe=[],Be={};function Pe(){he.set(0,0,0),ae.position.copy(ce),x.target.copy(ae.position);var e=m.position.clone().sub(x.target).normalize().multiplyScalar(2);e.add(ae.position),r.ZP.to(m.position,{x:e.x,y:e.y-8,z:e.z,duration:1,onUpdate:function(){},onComplete:function(){}}),x.update()}var Ee=document.createElement("div");function je(){Ee.style.display="block"}function ze(){Ee.style.display="none"}function Ce(e,t){Ee.innerText="".concat(t," / ")+"⚡ Loading... "+Math.round(100*e,2)+"%"}function Ie(e,t){e.lengthComputable&&Ce(Math.min(e.loaded/e.total,1),t);je()}function Le(e){Ee.innerText=e}function Me(){var e=window.innerWidth/window.innerHeight;m.aspect=e,m.left=window.innerWidth/-e,m.right=window.innerWidth/e,m.top=window.innerHeight/e,m.bottom=window.innerHeight/-e,m.updateProjectionMatrix(),h.setSize(window.innerWidth,window.innerHeight),h.render(y,m),i.setSize(window.innerWidth,window.innerHeight),i.render(y,m)}Ee.id="progressBar",Ee.innerhtml="Loading...",Ee.style.cssText="position: absolute; top: 50%; width: 100%; display: block; text-align: center; font-size: 2rem; color: black; user-select: none;",Ee.innerText="glb파일을 드래그 드롭하세요",document.body.appendChild(Ee),window.addEventListener("resize",Me),document.addEventListener("keydown",(function(e){Be[e.code]=!0})),document.addEventListener("keyup",(function(e){Be[e.code]=!1,"Escape"===e.key&&(_e.flag="pick",i.domElement.style.cursor="default"),e.key,e.key,e.key}));var Ae=new j(n),_e={flag:"pick"},Ve=new X(y,m,A,E.propContentsID,T);Ve.pickColorOn=E.pickColorOn,Ve.boxHelperOn=E.boxHelperOn,Ve.labelOn=E.labelOn,Ve.propContentsOn=E.propContentsOn;var Ye=new Se(y,m,A,i,_e);window.dist=function(){return Ye.dist()};var We=new ye(y,m,A,i,_e);window.areaCal=function(){return We.pick()};var Xe=new re(y,m,A,i,_e);window.volumeCal=function(){return Xe.pick()};var Ze=new Te(y,m,A,i,x,_e,z,e);window.markUpAdd=function(){return Ze.pick()};var Ne=new C(y,m,A),Ge=document.createElement("div");Ge.style.cssText="position: absolute; top: 9rem; left: 50%; display: none; transform: translate( -50% ); border: 1px solid #ccc; border-radius: 1.9rem; padding: 1rem; text-align: center; background: white; opacity: 0.9; color: black; font-size: 1.4rem; cursor: pointer; z-index: 1000;",document.body.appendChild(Ge),n.addEventListener("click",(function(e){if(!Ae.mouseMoved)switch(_e.flag){case"dim":Ye.mouse.x=e.clientX/n.clientWidth*2-1,Ye.mouse.y=-(e.clientY/n.clientHeight*2-1),Ye.start();break;case"area":We.mouse.x=e.clientX/n.clientWidth*2-1,We.mouse.y=-(e.clientY/n.clientHeight*2-1),We.calArea();break;case"volume":Xe.mouse.x=e.clientX/n.clientWidth*2-1,Xe.mouse.y=-(e.clientY/n.clientHeight*2-1),Xe.calVol();break;case"markUp":Ze.mouse.x=e.clientX/n.clientWidth*2-1,Ze.mouse.y=-(e.clientY/n.clientHeight*2-1),Ze.add();break;case"firstPerson":if(Ne.mouse.x=e.clientX/n.clientWidth*2-1,Ne.mouse.y=-(e.clientY/n.clientHeight*2-1),Ne.findIntersect(),!Ne.intersects.length)return;(ce=Ne.intersects[0].point).y=ce.y+10,Pe(),Ge.style.display="none",le.visible=E.characterVisible,pe=!0,_e.flag="pick";break;case"pick":Ve.mouse.x=e.clientX/n.clientWidth*2-1,Ve.mouse.y=-(e.clientY/n.clientHeight*2-1),Ve.pick()}})),n.addEventListener("mousemove",(function(e){"dim"===_e.flag&&(e.preventDefault(),Ye.mouse.x=e.clientX/n.clientWidth*2-1,Ye.mouse.y=-(e.clientY/n.clientHeight*2-1),Ye.drawing())}));var Ue=document.querySelector(".menu"),Ke=document.querySelector("#gizmo");function Je(e){var t=e.slice(0,e.indexOf(".glb"));return document.getElementById("fileName").innerText=t,t}function Qe(e,t,n,r){var i,a=Re(A);try{for(a.s();!(i=a.n()).done;){i.value.material.clippingPlanes=null}}catch(e){a.e(e)}finally{a.f()}var c=new o.Pa4(t.x,t.y,t.z);e.forEach((function(e){var t=(new o.ZzF).setFromObject(e).getCenter(new o.Pa4),i=new o.Pa4;switch(n){case"X":e.position.x=i.subVectors(t,c).multiplyScalar(r).x;break;case"Y":e.position.y=i.subVectors(t,c).multiplyScalar(r).y;break;case"Z":e.position.z=i.subVectors(t,c).multiplyScalar(r).z}}))}E.menu?(Ue.style.display="block",Ke.style.top="6rem"):(Ue.style.display="none",Ke.style.top="0rem"),window.dropdown=function(){"block"==document.getElementById("dropdown").style.display?document.getElementById("dropdown").style.display="none":document.getElementById("dropdown").style.display="block"},window.openTab=function(e,t){if("block"==document.getElementById(t).style.display)document.getElementById(t).style.display="none",e.currentTarget.className="tablinks";else{for(var n=document.getElementsByClassName("side"),o=0;o<n.length;o++)n[o].style.display="none";for(var r=document.getElementsByClassName("tablinks"),i=0;i<r.length;i++)r[i].className=r[i].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}},window.scaleXUp=function(e){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=null}}catch(e){n.e(e)}finally{n.f()}document.getElementById("scaleXSpan").textContent=e.target.value;var r,i=(new o.Pa4).subVectors(new o.Pa4(0,0,0),I.centerBox),a=Re(A);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.scale.x=e.target.value,c.position.x=i.x*e.target.value-i.x}}catch(e){a.e(e)}finally{a.f()}},window.scaleYUp=function(e){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=null}}catch(e){n.e(e)}finally{n.f()}document.getElementById("scaleYSpan").textContent=e.target.value;var r,i=(new o.Pa4).subVectors(new o.Pa4(0,0,0),I.centerBox),a=Re(A);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.scale.y=e.target.value,c.position.y=i.y*e.target.value-i.y}}catch(e){a.e(e)}finally{a.f()}},window.scaleZUp=function(e){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=null}}catch(e){n.e(e)}finally{n.f()}document.getElementById("scaleZSpan").textContent=e.target.value;var r,i=(new o.Pa4).subVectors(new o.Pa4(0,0,0),I.centerBox),a=Re(A);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.scale.z=e.target.value,c.position.z=i.z*e.target.value-i.z}}catch(e){a.e(e)}finally{a.f()}},window.explodeXChange=function(e){Qe(A,I.centerBox,"X",e.target.value)},window.explodeYChange=function(e){Qe(A,I.centerBox,"Y",e.target.value)},window.explodeZChange=function(e){Qe(A,I.centerBox,"Z",e.target.value)},window.selectTransformMode=function(e){switch(e.target.value){case"1":$e.setMode("translate");break;case"2":$e.setMode("rotate")}};var qe=!0,$e=new d.Ys(m,n),et=new o.Kj0(new o.BKK,new o.vBJ({side:o.ehD,opacity:.1,transparent:!0,color:"forestgreen"}));et.visible=!1,y.add(et);var tt,nt,ot,rt,it,at,ct=[new o.JOQ(new o.Pa4)];function st(){x.enabled=!0}function lt(){x.enabled=!1}function ut(){var e=(new o.Pa4).set(0,0,1).applyQuaternion(et.quaternion),t=(new o.Pa4).copy(et.position);ct[0].setFromNormalAndCoplanarPoint(e,t)}window.onClippingGizmo=function(e){if(e.target.checked){document.getElementById("clippingMode").style.display="block";var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=ct}}catch(e){n.e(e)}finally{n.f()}if(et.scale.setScalar(I.sizeBox),et.visible=!0,$e.enabled=!0,$e.setMode("translate"),$e.attach(et),$e.name="transformControls",y.add($e),$e.addEventListener("mouseDown",lt),$e.addEventListener("mouseUp",st),$e.addEventListener("change",ut),qe&&(et.position.copy(I.centerBox),ut()),!qe)return;qe=!1}else{document.getElementById("clippingMode").style.display="none";var o,r=Re(A);try{for(r.s();!(o=r.n()).done;){o.value.material.clippingPlanes=null}}catch(e){r.e(e)}finally{r.f()}et.visible=!1,$e.enabled=!1,$e.visible=!1,y.remove($e),$e.removeEventListener("mouseDown",lt),$e.removeEventListener("mouseUp",st),$e.removeEventListener("change",ut)}};var dt=!0,pt=!1,ft=!1,ht=!1,yt=[new o.JOQ(new o.Pa4(-1,0,0),document.getElementById("rngClippingX").value),new o.JOQ(new o.Pa4(0,-1,0),document.getElementById("clippingYId").value),new o.JOQ(new o.Pa4(0,0,-1),document.getElementById("clippingZId").value)];function mt(e){x.object=e,x.target.set(I.centerBox.x,I.centerBox.y,I.centerBox.z),x.update(),oe.camera=e,Ve.camera=e,Ye.camera=e,We.camera=e,Xe.camera=e,$e.children[0].camera=e}window.onClipping=function(e){if(e.target.checked){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=yt}}catch(e){n.e(e)}finally{n.f()}if(document.getElementById("clippingGroup").style.display="block",dt||(rt.visible=!0,it.visible=!0,at.visible=!0),!dt)return;dt=!1,document.getElementById("rngClippingX").min=I.box.min.x-.1,document.getElementById("rngClippingX").max=I.box.max.x+.1,document.getElementById("rngClippingX").step=.01,document.getElementById("rngClippingX").value=document.getElementById("rngClippingX").max,document.getElementById("clippingYId").min=I.box.min.y-.1,document.getElementById("clippingYId").max=I.box.max.y+.1,document.getElementById("clippingYId").step=.01,document.getElementById("clippingYId").value=document.getElementById("clippingYId").max,document.getElementById("clippingZId").min=I.box.min.z-.1,document.getElementById("clippingZId").max=I.box.max.z+.1,document.getElementById("clippingZId").step=.01,document.getElementById("clippingZId").value=document.getElementById("clippingZId").max,(tt=new o.tJx(yt[0],I.sizeBox,"red")).visible=!1,y.add(tt),(nt=new o.tJx(yt[1],I.sizeBox,"green")).visible=!1,y.add(nt),(ot=new o.tJx(yt[2],I.sizeBox,"blue")).visible=!1,y.add(ot),yt[0].constant=document.getElementById("rngClippingX").max,yt[1].constant=document.getElementById("clippingYId").max,yt[2].constant=document.getElementById("clippingZId").max;var r=new o._12(I.sizeBox,I.sizeBox),i=r.clone();i.rotateY(Math.PI/2);var a=r.clone();a.rotateX(Math.PI/2);var c=r.clone(),s=new o.vBJ({color:"red",opacity:.2,transparent:!0,side:o.ehD}),l=new o.vBJ({color:"green",opacity:.2,transparent:!0,side:o.ehD}),u=new o.vBJ({color:"blue",opacity:.2,transparent:!0,side:o.ehD});(rt=new o.Kj0(i,s)).position.set(yt[0].constant,I.centerBox.y,I.centerBox.z),y.add(rt),(it=new o.Kj0(a,l)).position.set(I.centerBox.x,yt[1].constant,I.centerBox.z),y.add(it),(at=new o.Kj0(c,u)).position.set(I.centerBox.x,I.centerBox.y,yt[2].constant),y.add(at),rt.updateMatrixWorld()}else document.getElementById("clippingGroup").style.display="none",tt.visible=!1,nt.visible=!1,ot.visible=!1,y.remove(tt),y.remove(nt),y.remove(ot),rt.visible=!1,it.visible=!1,at.visible=!1},window.clippingXSlide=function(e){pt?(yt[0].constant=-e.target.value,rt.position.set(-e.target.value,I.centerBox.y,I.centerBox.z)):(yt[0].constant=e.target.value,rt.position.set(e.target.value,I.centerBox.y,I.centerBox.z))},window.clippingYSlide=function(e){ft?(yt[1].constant=-e.target.value,it.position.set(I.centerBox.x,-e.target.value,I.centerBox.z)):(yt[1].constant=e.target.value,it.position.set(I.centerBox.x,e.target.value,I.centerBox.z))},window.clippingZSlide=function(e){ht?(yt[2].constant=-e.target.value,at.position.set(I.centerBox.x,I.centerBox.y,-e.target.value)):(yt[2].constant=e.target.value,at.position.set(I.centerBox.x,I.centerBox.y,e.target.value))},window.negateXSwitch=function(e){e.target.checked?(yt[0].negate(),pt=!0):(yt[0].negate(),pt=!1)},window.negateYSwitch=function(e){e.target.checked?(yt[1].negate(),ft=!0):(yt[1].negate(),ft=!1)},window.negateZSwitch=function(e){e.target.checked?(yt[2].negate(),ht=!0):(yt[2].negate(),ht=!1)},window.firstPersonSwitch=function(){if(pe)document.getElementById("firstPersonGroup").style.display="none",ae.visible=!1,pe=!1,r.ZP.to(m.position,{x:x.object.position.x-I.sizeBox/32,y:x.object.position.y+I.sizeBox/32,z:x.object.position.z+I.sizeBox/32,duration:1});else{if(document.getElementById("firstPersonGroup").style.display="block",_e.flag="firstPerson",setTimeout((function(){Ge.style.display="block",Ge.innerHTML='<span style="color:#1c5c4c; font-weight:bold">1인칭 시점을 시작할 장소를 클릭하세요</span>'}),0),ie)return;Ge.style.display="block",Ge.innerHTML='<span style="color:#1c5c4c; font-weight:bold">1인칭 시점 생성중</span>',setTimeout((function(){var e=[];H.updateMatrixWorld(!0),H.traverse((function(t){if(t.geometry){var n=t.geometry.clone();for(var o in n.applyMatrix4(t.matrixWorld),n.attributes)"position"!==o&&n.deleteAttribute(o);e.push(n)}}));var t=p.qf(e,!1);t.computeBoundsTree(),(ie=new o.Kj0(t)).name="collider",ie.material.wireframe=!1,ie.visible=!1,y.add(ie)}),0),(ae=new o.Kj0(new f.k(1,2,1,10,.5),new o.Wid)).geometry.translate(0,-.5,0),ae.capsuleInfo={radius:.5,segment:new o.Zzh(new o.Pa4,new o.Pa4(0,-1,0))},ae.name="player",ae.castShadow=!0,ae.receiveShadow=!0,ae.material.shadowSide=2,ae.material.wireframe=!0,ae.visible=!1,y.add(ae),F.load("characterAnimation_kd.glb",(function(e){(le=e.scene).traverse((function(e){e.isMesh&&(e.castShadow=!0)})),le.visible=!1,le.scale.set(.01,.01,.01),le.position.copy(ae.position),le.animations=e.animations,ue=new o.Xcj(le),Oe[0]=ue.clipAction(le.animations[0]),Oe[1]=ue.clipAction(le.animations[1]),Oe[2]=ue.clipAction(le.animations[2]),Oe[3]=ue.clipAction(le.animations[3]),Oe[4]=ue.clipAction(le.animations[4]),de=Oe[4],y.add(le)}))}},window.characterVisibleSwitch=function(e){E.characterVisible=!!e.target.checked,le.visible=!!e.target.checked},window.playerRunSwitch=function(e){E.playerRun=!!e.target.checked},window.wireframeSwitch=function(e){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){t.value.material.wireframe=!!e.target.checked}}catch(e){n.e(e)}finally{n.f()}},window.solidSwitch=function(e){e.target.checked?A.forEach((function(e){e.material.map=null,e.material.needsUpdate=!0})):A.forEach((function(e,t){e.material.map=D[t],e.material.needsUpdate=!0}))},window.gridHelperSwith=function(e){O.visible=!!e.target.checked},window.axeSwitch=function(e){k.visible=!!e.target.checked},window.autoRotateSwitch=function(e){x.autoRotate=!!e.target.checked},window.cameraSwitch=function(){m.isPerspectiveCamera?(v.near=.001,v.far=b.far,v.zoom=.4*Math.min(window.innerWidth/(I.box.max.x-I.box.min.x),window.innerHeight/(I.box.max.y-I.box.min.y)),(m=v).position.copy(b.position),m.updateProjectionMatrix(),mt(m),Me()):m.isOrthographicCamera&&((m=b).position.copy(v.position),m.updateProjectionMatrix(),mt(m),Me())},window.shadowSwitch=function(e){B.receiveShadow=!!e.target.checked},window.meshShadowSwitch=function(e){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){t.value.receiveShadow=!!e.target.checked}}catch(e){n.e(e)}finally{n.f()}},window.meshSideSwitch=function(e){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.material.side=e.target.checked?2:0,o.material.needsUpdate=!0}}catch(e){n.e(e)}finally{n.f()}},window.mapControlSwitch=function(e){x.screenSpacePanning=!e.target.checked},window.envMapSwitch=function(e){y.background=y.environment=e.target.checked?P:null},document.getElementById("exposureId").value=E.exposure,document.getElementById("exposureSpanId").textContent=E.exposure,window.exposureChange=function(e){i.toneMappingExposure=e.target.value,document.getElementById("exposureSpanId").textContent=e.target.value},window.navigationGizmoSwith=function(e){document.getElementById("gizmo").style.display=e.target.checked?"block":"none"},window.pickColorSwith=function(e){Ve.pickColorOn=!!e.target.checked},window.boxHelperSwith=function(e){Ve.boxHelperOn=!!e.target.checked},window.labelSwith=function(e){Ve.labelOn=!!e.target.checked},window.raycastAccSwitch=function(e){var t,n=Re(A);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.target.checked?o.geometry.computeBoundsTree():o.geometry.boundsTree=null}}catch(e){n.e(e)}finally{n.f()}};var bt=new o.SUY,vt=[];!function e(){var t=bt.getDelta(),n=bt.getElapsedTime();if(document.getElementById("cameraPostionX").textContent=m.position.x.toFixed(2),document.getElementById("cameraPostionY").textContent=m.position.y.toFixed(2),document.getElementById("cameraPostionZ").textContent=m.position.z.toFixed(2),document.getElementById("orbitControlX").textContent=x.target.x.toFixed(2),document.getElementById("orbitControlY").textContent=x.target.y.toFixed(2),document.getElementById("orbitControlZ").textContent=x.target.z.toFixed(2),ue){ue.update(t);var r=Math.atan2(m.position.x-ae.position.x,m.position.z-ae.position.z)+Math.PI,a=new o._fP;a.setFromAxisAngle(new o.Pa4(0,1,0),r+ke),le.quaternion.rotateTowards(a,o.M8C.degToRad(5)),le.position.copy(ae.position),le.position.sub(new o.Pa4(0,.6077,0))}x.update(),oe.update(),i.setAnimationLoop(e),i.render(y,m),h.render(y,m);for(;vt.length>0&&vt[0]<=n-1;)vt.shift();if(vt.push(n),document.getElementById("renderCalls").textContent=i.info.render.calls.toLocaleString("ko-KR"),document.getElementById("renderTriangles").textContent=i.info.render.triangles.toLocaleString("ko-KR"),document.getElementById("renderGeometries").textContent=i.info.memory.geometries.toLocaleString("ko-KR"),document.getElementById("renderTextures").textContent=i.info.memory.textures.toLocaleString("ko-KR"),document.getElementById("renderFps").textContent=vt.length,i.info.reset(),!L)return;if(pe){if(!ie)return;x.maxPolarAngle=Math.PI/2,function(e){se=E.playerRun?30:3,he.y+=fe?0:-30*e,ae.position.addScaledVector(he,e);var t=x.getAzimuthalAngle(),n=de;de=Oe[0],Be.KeyW&&(be.set(0,0,-1).applyAxisAngle(me,t),ae.position.addScaledVector(be,se*e),ke=0,de=E.playerRun?Oe[2]:Oe[1]),Be.KeyS&&(be.set(0,0,1).applyAxisAngle(me,t),ae.position.addScaledVector(be,se*e),ke=Math.PI,de=E.playerRun?Oe[2]:Oe[1]),Be.KeyA&&(be.set(-1,0,0).applyAxisAngle(me,t),ae.position.addScaledVector(be,se*e),ke=Math.PI/2,de=E.playerRun?Oe[2]:Oe[1]),Be.KeyD&&(be.set(1,0,0).applyAxisAngle(me,t),ae.position.addScaledVector(be,se*e),ke=-Math.PI/2,de=E.playerRun?Oe[2]:Oe[1]),he.y<-8&&(de=Oe[3]),Be.Space&&fe&&(he.y=15),n!==de&&(n.fadeOut(.5),de.reset().fadeIn(.1).play()),ae.updateMatrixWorld();var o=ae.capsuleInfo;ge.makeEmpty(),we.copy(ie.matrixWorld).invert(),xe.copy(o.segment),xe.start.applyMatrix4(ae.matrixWorld).applyMatrix4(we),xe.end.applyMatrix4(ae.matrixWorld).applyMatrix4(we),ge.expandByPoint(xe.start),ge.expandByPoint(xe.end),ge.min.addScalar(-o.radius),ge.max.addScalar(o.radius),ie.geometry.boundsTree.shapecast({intersectsBounds:function(e){return e.intersectsBox(ge)},intersectsTriangle:function(e){var t=be,n=ve,r=e.closestPointToSegment(xe,t,n);if(r<o.radius){var i=o.radius-r,a=n.sub(t).normalize();xe.start.addScaledVector(a,i),xe.end.addScaledVector(a,i)}}});var r=be;r.copy(xe.start).applyMatrix4(ie.matrixWorld);var i=ve;i.subVectors(r,ae.position),fe=i.y>Math.abs(e*he.y*.25);var a=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(a),ae.position.add(i),fe?he.set(0,0,0):(i.normalize(),he.addScaledVector(i,-i.dot(he))),m.position.sub(x.target),x.target.copy(ae.position),m.position.add(ae.position),ae.position.y<-25&&Pe()}(t)}else x.maxPolarAngle=Math.PI,function(){var e=x.target.distanceTo(x.object.position),t=x.minDistanceSettingValue;if(e<t){var n=x.object.position,r=x.target,i=new o.Pa4,a=3;r.copy(i.subVectors(r,n).normalize().multiplyScalar(a).add(r)),x.update()}document.getElementById("DistanceCamera").textContent=e.toFixed(2)+" > "+t.toFixed(2)}()}()}((function(e){}));var We;We="group1",[{name:"name1",group1:"Section1",group2:"GroupA"},{name:"name2",group1:"Section1",group2:"GroupA"},{name:"name3",group1:"Section1",group2:"GroupB"},{name:"name4",group1:"Section2",group2:"GroupA"}].reduce((function(e,t){var n=t[We];return e[n]=e[n]||[],e[n].push(t),e}),{})}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,i]=e[u],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[a,c,s]=n,l=0;if(a.some((t=>0!==e[t]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(s)var u=s(o)}for(t&&t(n);l<a.length;l++)i=a[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self.webpackChunkweb_viewer=self.webpackChunkweb_viewer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[465],(()=>o(5386)));r=o.O(r)})();