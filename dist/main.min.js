/*! For license information please see main.min.js.LICENSE.txt */
(()=>{"use strict";var e,t={4636:(e,t,n)=>{n(853),n(6208),n(4883),n(5007),n(8995),n(6650),n(9275),n(3528),n(4994),n(5281),n(3214),n(7838),n(5054),n(5252),n(8821),n(2321),n(2798),n(6364),n(6632),n(1928),n(4845),n(2729),n(3694),n(4063),n(2031),n(6908);var o=n(6075),r=n(5435),i=n(8345),a=n(8012),c=n(3934),s=n(981),l=n(4418),u=n(6070),p=n(9352),d=n(6993),f=n(5442);n(3130),n(3382),n(5005),n(3290),n(4130),n(644);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t="function"==typeof Map?new Map:void 0;return w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return x(e,arguments,O(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),B(o,e)},w(e)}function x(e,t,n){return x=k()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&B(r,n.prototype),r},x.apply(null,arguments)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(s,e);var t,n,r,i,a,c=(t=s,n=k(),function(){var e,o=O(t);if(n){var r=O(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return v(this,e)});function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=c.call(this)).camera=e,n.options=Object.assign({size:90,padding:8,bubbleSizePrimary:8,bubbleSizeSeconday:6,showSecondary:!0,lineWidth:2,fontSize:"11px",fontFamily:"arial",fontWeight:"bold",fontColor:"#151515",fontYAdjust:0,colors:{x:["#f73c3c","#942424"],y:["#6ccb26","#417a17"],z:["#178cf0","#0e5490"]}},t),n.onAxisSelected=null,n.bubbles=[{axis:"X",direction:new o.Pa4(1,0,0),size:n.options.bubbleSizePrimary,color:n.options.colors.x,line:n.options.lineWidth,label:"X"},{axis:"Y",direction:new o.Pa4(0,1,0),size:n.options.bubbleSizePrimary,color:n.options.colors.y,line:n.options.lineWidth,label:"Y"},{axis:"Z",direction:new o.Pa4(0,0,1),size:n.options.bubbleSizePrimary,color:n.options.colors.z,line:n.options.lineWidth,label:"Z"},{axis:"-X",direction:new o.Pa4(-1,0,0),size:n.options.bubbleSizeSeconday,color:n.options.colors.x},{axis:"-Y",direction:new o.Pa4(0,-1,0),size:n.options.bubbleSizeSeconday,color:n.options.colors.y},{axis:"-Z",direction:new o.Pa4(0,0,-1),size:n.options.bubbleSizeSeconday,color:n.options.colors.z}],n.center=new o.Pa4(n.options.size/2,n.options.size/2,0),n.selectedAxis=null,n.innerHTML="<canvas width='"+n.options.size+"' height='"+n.options.size+"'></canvas>",n.id="gizmo",n.onMouseMove=n.onMouseMove.bind(g(n)),n.onMouseOut=n.onMouseOut.bind(g(n)),n.onMouseClick=n.onMouseClick.bind(g(n)),n}return r=s,i=[{key:"connectedCallback",value:function(){this.canvas=this.querySelector("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("mousemove",this.onMouseMove,!1),this.canvas.addEventListener("mouseout",this.onMouseOut,!1),this.canvas.addEventListener("click",this.onMouseClick,!1)}},{key:"disconnectedCallback",value:function(){this.canvas.removeEventListener("mousemove",this.onMouseMove,!1),this.canvas.removeEventListener("mouseout",this.onMouseOut,!1),this.canvas.removeEventListener("click",this.onMouseClick,!1)}},{key:"onMouseMove",value:function(e){var t=this.canvas.getBoundingClientRect();this.mouse=new o.Pa4(e.clientX-t.left,e.clientY-t.top,0)}},{key:"onMouseOut",value:function(e){this.mouse=null}},{key:"onMouseClick",value:function(e){this.onAxisSelected&&"function"==typeof this.onAxisSelected&&this.onAxisSelected(this.selectedAxis.axis)}},{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000";this.context.beginPath(),this.context.arc(e.x,e.y,t,0,2*Math.PI,!1),this.context.fillStyle=n,this.context.fill(),this.context.closePath()}},{key:"drawLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000";this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.lineWidth=n,this.context.strokeStyle=o,this.context.stroke(),this.context.closePath()}},{key:"update",value:function(){this.clear();var e,t=(new o.yGw).makeRotationFromEuler(this.camera.rotation).clone().invert(),n=y(this.bubbles);try{for(n.s();!(e=n.n()).done;)(l=e.value).position=this.getBubblePosition(l.direction.clone().applyMatrix4(t))}catch(e){n.e(e)}finally{n.f()}var r=[];for(var i in this.bubbles)!0!==this.options.showSecondary&&"-"===i[0]||r.push(this.bubbles[i]);if(r.sort((function(e,t){return e.position.z>t.position.z?1:-1})),this.selectedAxis=null,this.mouse){var a,c=1/0,s=y(r);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=this.mouse.distanceTo(l.position);(u<c||u<l.size)&&(c=u,this.selectedAxis=l)}}catch(e){s.e(e)}finally{s.f()}}this.drawLayers(r)}},{key:"drawLayers",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,r=o.color;r=this.selectedAxis===o?"#FFFFFF":o.position.z>=-.01?o.color[0]:o.color[1],this.drawCircle(o.position,o.size,r),o.line&&this.drawLine(this.center,o.position,o.line,r),o.label&&(this.context.font=[this.options.fontWeight,this.options.fontSize,this.options.fontFamily].join(" "),this.context.fillStyle=this.options.fontColor,this.context.textBaseline="middle",this.context.textAlign="center",this.context.fillText(o.label,o.position.x,o.position.y+this.options.fontYAdjust))}}catch(e){n.e(e)}finally{n.f()}}},{key:"getBubblePosition",value:function(e){return new o.Pa4(e.x*(this.center.x-this.options.bubbleSizePrimary/2-this.options.padding)+this.center.x,this.center.y-e.y*(this.center.y-this.options.bubbleSizePrimary/2-this.options.padding),e.z)}}],i&&b(r.prototype,i),a&&b(r,a),Object.defineProperty(r,"prototype",{writable:!1}),s}(w(HTMLElement));function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}window.customElements.define("orientation-gizmo",S);var P=j((function e(t){var n,o,r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mouseMoved,t.addEventListener("mousedown",(function(e){n=e.clientX,o=e.clientY,r=Date.now()})),t.addEventListener("mouseup",(function(e){var t=Math.abs(e.clientX-n),a=Math.abs(e.clientY-o),c=r-Date.now();i.mouseMoved=t>5||a>5||c>500}))}));n(5862),n(9457),n(6900),n(7751),n(238);function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var C=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.camera=n,this.meshes=r,this.mouse=new o.FM8,this.raycaster=new o.iMs,this.intersects}var t,n,r;return t=e,(n=[{key:"findIntersect",value:function(){this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.firstHitOnly=!0,this.raycaster.layers.set(1),this.intersects=this.raycaster.intersectObjects(this.meshes,!1)}}])&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var L=M((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.circleTexture=(new o.dpR).load("./textures/circle.png");var i=new o.xeV({map:this.circleTexture,transparent:!0,depthTest:!1,depthWrite:!1,sizeAttenuation:!1}),a=new o.jyi(i);return a.position.set(t,n,r),a.scale.set(.02,.02,.02),a}));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=F(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},_.apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=W(e);if(t){var r=W(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(a,e);var t,n,r,i=Y(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).propContentsID=o,c.jsonData=r,c.pickColorOn=!0,c.boxHelperOn=!0,c.labelOn=!0,c.propContentsOn=!0,c.propContents=document.getElementById(c.propContentsID),c.propContents.innerHTML="객체를 클릭하면 속성이 표기됨",c.scrollIntoViewElement=null,c.label=document.createElement("div"),c.label.id="label",c.label.style.position="absolute",c.label.style.display="inline-block",c.label.style.top="0rem",c.label.style.minWidth="35rem",c.label.style.padding="1rem",c.label.style.overflowY="auto",c.label.style.fontSize="1.4rem",c.label.style.color="white",c.label.style.background="rgba(0, 0, 0, 0.8)",c.labelCSS2D,c}return t=a,(n=[{key:"pick",value:function(){var e=this;if(this.scrollIntoViewElement&&(this.scrollIntoViewElement.style.background="",this.scrollIntoViewElement=null),this.scene.remove(this.pickCloneObj),this.scene.remove(this.pickBoxHelper),this.scene.remove(this.marker),this.scene.remove(this.labelCSS2D),this.propContents.innerHTML="객체를 클릭하면 속성이 표기됨",_(W(a.prototype),"findIntersect",this).call(this),this.intersects.length){if(this.pickObject=this.intersects[0].object,this.scrollIntoViewElement=document.getElementById("".concat(this.pickObject.uuid)),this.scrollIntoViewElement.scrollIntoView({behavior:"smooth"}),this.scrollIntoViewElement.style.background="#BDBDBD",this.pickColorOn){var t=new o.EJi({color:"#ff8747",roughness:.4,metalness:1,emissive:"red",side:2});this.pickCloneObj=this.pickObject.clone(),this.pickCloneObj.material=t,this.pickCloneObj.name="cloneObj",this.scene.add(this.pickCloneObj)}if(this.boxHelperOn&&(this.pickBoxHelper=new o.fQA(this.pickObject,"forestgreen"),this.scene.add(this.pickBoxHelper)),this.labelOn){this.marker=new L(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z),this.scene.add(this.marker),this.label.innerHTML="\n            Name : ".concat(this.pickObject.name," <br>\n            "),document.body.appendChild(this.label);var n=document.createElement("div");n.appendChild(this.label),this.labelCSS2D=new p.j(n),this.labelCSS2D.position.copy(this.intersects[0].point),this.scene.add(this.labelCSS2D)}var r;this.propContentsOn&&(this.propContents.innerHTML="",this.propContents.innerHTML+="\n            Id : ".concat(this.pickObject.id," <br>\n            Uuid : ").concat(this.pickObject.uuid," <br>\n            Point x : ").concat(this.intersects[0].point.x.toFixed(3)," <br>\n            Point y : ").concat(this.intersects[0].point.y.toFixed(3)," <br>\n            Point z : ").concat(this.intersects[0].point.z.toFixed(3)," <br>\n            Geometry Type : ").concat(this.pickObject.geometry.type," <br>\n            Material Name : ").concat(this.pickObject.material.name," <br>\n            Material Opacity : ").concat(this.pickObject.material.opacity," <br>\n            Texture MIME Type : ").concat((null===(r=this.pickObject.material.map)||void 0===r?void 0:r.userData.mimeType)||"없음"," <br><br>\n            ")),this.jsonData[0]&&(this.jsonValues=Object.values(this.jsonData[0]),this.jsonValues.forEach((function(t,n){if(t.name===e.pickObject.name)for(var o=0,r=Object.entries(t);o<r.length;o++){var i=A(r[o],2),a=i[0],c=i[1];e.propContents.innerHTML+="".concat(a,": ").concat(c," <br>")}})))}}}])&&R(t.prototype,n),r&&R(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var N=function(){function e(t,n,o,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.meshes=n,this.camera=o,this.controls=r,this.meshListID=i,this.listElement=document.getElementById(this.meshListID),this.listElement.innerHTML="",this.fragment=document.createDocumentFragment();for(var a=0;a<this.meshes.length;a++)this.addList(this.meshes[a].name,this.meshes[a].uuid);this.listElement.append(this.fragment)}var t,n,o;return t=e,(n=[{key:"addList",value:function(e,t){var n=this,o=this.scene.getObjectByProperty("uuid",t);this.item=document.createElement("div"),this.item.className="item",this.item.id=t,this.fragment.appendChild(this.item);var r=document.createElement("div");r.className="item_name",r.name=e,r.textContent=e,this.item.append(r);var i=document.createElement("div");i.className="item_btnContainer";var a=document.createElement("input");a.type="checkbox",a.checked="true",a.id="label"+t,a.setAttribute("uuid",t),a.addEventListener("click",(function(e){n.onVisible(e)})),i.appendChild(a);var c=document.createElement("label");c.htmlFor="label"+t,c.name=e,c.style.width="2.5rem",i.appendChild(c),this.item.append(i);var s=document.createElement("input");s.className="item_colour",s.placeholder="color",s.type="color",s.value="#"+o.material.color.getHexString(),s.setAttribute("uuid",t),s.addEventListener("input",(function(e){return n.changeColor(e)})),i.append(s);var l=document.createElement("input");l.name=e,l.type="text",l.value=100,l.setAttribute("uuid",t),l.addEventListener("change",(function(e){return n.opcaityChange(e)})),i.appendChild(l)}},{key:"changeColor",value:function(e){var t=e.target.getAttribute("uuid");this.scene.getObjectByProperty("uuid",t).material.color.set(e.target.value)}},{key:"onVisible",value:function(e){var t=e.target.getAttribute("uuid"),n=this.scene.getObjectByProperty("uuid",t);switch(e.target.checked){case!0:n.visible=!0,n.layers.enable(1);break;case!1:n.visible=!1,n.layers.disable(1),this.scene.remove(this.scene.getObjectByName("cloneObj"))}}},{key:"opcaityChange",value:function(e){var t=e.target.getAttribute("uuid"),n=this.scene.getObjectByProperty("uuid",t),o=+e.target.value;o=o>100?100:o<1?1:o,e.target.value=o,n.material.transparent=!0,n.material.opacity=e.target.value/100,100==e.target.value&&(n.material.transparent=!1)}}])&&X(t.prototype,n),o&&X(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var U=K((function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.viewMode=n,this.camera=r,this.controls=i,this.box=(new o.ZzF).setFromObject(this.model),this.sizeBox=this.box.getSize(new o.Pa4).length(),this.centerBox=this.box.getCenter(new o.Pa4);var a=0,c=0,s=0;switch(this.viewMode){case"X":a=1;break;case"Y":c=1;break;case"Z":s=1;break;case"-X":a=1,a*=-1;break;case"-Y":c=1,c*=-1;break;case"-Z":s=1,s*=-1}this.camera.position.set(this.centerBox.x+a,this.centerBox.y+c,this.centerBox.z+s);var l=.5*this.sizeBox,u=Math.PI/180*(.5*this.camera.fov),p=l/Math.tan(u);(new o.Pa4).subVectors(this.camera.position,this.centerBox).normalize().multiplyScalar(p).add(this.centerBox);this.camera.near=.001,this.camera.far=1e10,this.camera.updateProjectionMatrix(),this.camera.lookAt(this.centerBox.x,this.centerBox.y,this.centerBox.z),this.controls.target.set(this.centerBox.x,this.centerBox.y,this.centerBox.z),this.controls.minDistanceSettingValue=p/20}));function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=$(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},q.apply(this,arguments)}function $(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=oe(e);if(t){var r=oe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(a,e);var t,n,r,i=te(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).renderer=o,c.pickState=r,c.pickColorOn=!0,c.labelOn=!0,c.pickObjectSaveMaterial=0,c.pickObject=null,c}return t=a,(n=[{key:"pick",value:function(){this.pickState.flag="volume",this.renderer.domElement.style.cursor="crosshair"}},{key:"calVol",value:function(){var e=this;if(q(oe(a.prototype),"findIntersect",this).call(this),this.intersects.length){if(this.pickObject=this.intersects[0].object,this.pickColorOn){this.pickObjectSaveMaterial=this.pickObject.material;var t=new o.EJi({color:"skyblue",roughness:.5,metalness:1,side:2});this.pickObject.material=t}if(this.labelOn){this.marker=new L(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z),this.scene.add(this.marker),this.label=document.createElement("div"),this.label.id="volLabel",this.label.innerHTML=ie(this.pickObject.geometry).toFixed(3)+" ㎥",this.label.style.top="0rem",this.label.style.position="absolute",this.label.style.display="inline-block",this.label.style.top="0rem",this.label.style.minWidth="18rem",this.label.style.padding="0.5rem",this.label.style.overflowY="auto",this.label.style.fontSize="1.4rem",this.label.style.fontFamily="sans-serif",this.label.style.color="white",this.label.style.background="skyblue";var n=document.createElement("div");n.appendChild(this.label),this.labelCSS2D=new p.j(n),this.labelCSS2D.position.copy(this.intersects[0].point),this.scene.add(this.labelCSS2D)}setTimeout((function(){alert("체적 = ".concat(ie(e.pickObject.geometry).toFixed(3)," ㎥")),e.pickObject&&e.pickColorOn&&(e.pickObject.material=e.pickObjectSaveMaterial,e.pickObject=null),e.scene.remove(e.labelCSS2D),e.scene.remove(e.marker),e.pickState.flag="pick"}),200),this.renderer.domElement.style.cursor="default"}}}])&&Q(t.prototype,n),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function ie(e){if(!e.isBufferGeometry)return 0;var t=null!==e.index,n=e.attributes.position,r=0,i=new o.Pa4,a=new o.Pa4,c=new o.Pa4;if(t)for(var s=e.index,l=s.count/3,u=0;u<l;u++)i.fromBufferAttribute(n,s.array[3*u+0]),a.fromBufferAttribute(n,s.array[3*u+1]),c.fromBufferAttribute(n,s.array[3*u+2]),r+=ae(i,a,c);else for(var p=n.count/3,d=0;d<p;d++)i.fromBufferAttribute(n,3*d+0),a.fromBufferAttribute(n,3*d+1),c.fromBufferAttribute(n,3*d+2),r+=ae(i,a,c);return r}function ae(e,t,n){return e.dot(t.cross(n))/6}function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function le(){return le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=ue(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},le.apply(this,arguments)}function ue(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=he(e);if(t){var r=he(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return fe(this,n)}}function fe(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(a,e);var t,n,r,i=de(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).renderer=o,c.pickState=r,c.pickColorOn=!0,c.labelOn=!0,c.pickObjectSaveMaterial=null,c.pickObject=null,c}return t=a,(n=[{key:"pick",value:function(){this.renderer.domElement.style.cursor="crosshair",this.pickState.flag="area"}},{key:"calArea",value:function(){var e=this;if(le(he(a.prototype),"findIntersect",this).call(this),this.intersects.length){if(this.pickObject=this.intersects[0].object,this.pickColorOn){this.pickObjectSaveMaterial=this.pickObject.material;var t=new o.EJi({color:"orange",roughness:.5,metalness:1,side:2});this.pickObject.material=t}if(this.labelOn){this.marker=new L(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z),this.scene.add(this.marker),this.label=document.createElement("div"),this.label.id="areaLabel",this.label.innerHTML=me(this.pickObject.geometry).toFixed(3)+" ㎡",this.label.style.position="absolute",this.label.style.display="inline-block",this.label.style.top="0rem",this.label.style.minWidth="18rem",this.label.style.padding="0.5rem",this.label.style.overflowY="auto",this.label.style.fontSize="1.4rem",this.label.style.fontFamily="sans-serif",this.label.style.color="white",this.label.style.background="orange";var n=document.createElement("div");n.appendChild(this.label),this.labelCSS2D=new p.j(n),this.labelCSS2D.position.copy(this.intersects[0].point),this.scene.add(this.labelCSS2D)}setTimeout((function(){alert("면적 = ".concat(me(e.pickObject.geometry).toFixed(3)," ㎡")),e.pickObject&&e.pickColorOn&&(e.pickObject.material=e.pickObjectSaveMaterial,e.pickObject=null),e.scene.remove(e.labelCSS2D),e.scene.remove(e.marker),e.pickState.flag="pick"}),200),this.renderer.domElement.style.cursor="default"}}}])&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function me(e){var t=e;function n(e,t,n){var r=new o.Pa4,i=new o.Pa4;r=e.clone().sub(t),i=e.clone().sub(n);var a=new o.Pa4;return a.crossVectors(r,i),a.length()/2}for(var r=0,i=new o.Pa4,a=new o.Pa4,c=new o.Pa4,s=0;s<t.index.count/3;s++){var l=t.attributes.position,u=t.index.array;i.fromBufferAttribute(l,u[3*s+0]),a.fromBufferAttribute(l,u[3*s+1]),c.fromBufferAttribute(l,u[3*s+2]),r+=n(i,a,c)}return r}function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ve(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ge(){return ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=we(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},ge.apply(this,arguments)}function we(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oe(e)););return e}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Oe(e);if(t){var r=Oe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Be(this,n)}}function Be(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(a,e);var t,n,r,i=ke(a);function a(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,e,t,n)).renderer=o,c.pickState=r,c.lineDrawing=!1,c.dimLine,c.dimTextLabel,c.delBtnLabel,c.counter=0,c.infoBackspaceDiv=document.createElement("button"),c.infoBackspaceDiv.style.position="absolute",c.infoBackspaceDiv.style.top="9rem",c.infoBackspaceDiv.style.left="50%",c.infoBackspaceDiv.style.display="none",c.infoBackspaceDiv.style.transform="translate( -50% )",c.infoBackspaceDiv.style.border="1px solid #ccc",c.infoBackspaceDiv.style.borderRadius="1.9rem",c.infoBackspaceDiv.style.textAlign="center",c.infoBackspaceDiv.style.background="white",c.infoBackspaceDiv.style.opacity="0.9",c.infoBackspaceDiv.style.color="black",c.infoBackspaceDiv.style.fontSize="1.4rem",c.infoBackspaceDiv.style.padding="1rem",c.infoBackspaceDiv.style.cursor="pointer",c.infoBackspaceDiv.style.zIndex="1000",c.infoBackspaceDiv.addEventListener("mouseover",(function(){c.infoBackspaceDiv.style.background="#ccc"})),c.infoBackspaceDiv.addEventListener("mouseout",(function(){c.infoBackspaceDiv.style.background="inherit"})),c.infoBackspaceDiv.addEventListener("click",(function(){return c.del()})),document.body.appendChild(c.infoBackspaceDiv),c}return t=a,(n=[{key:"dist",value:function(){this.renderer.domElement.style.cursor="crosshair",this.pickState.flag="dim"}},{key:"start",value:function(){if(ge(Oe(a.prototype),"findIntersect",this).call(this),this.intersects.length)if(this.lineDrawing){var e=this.dimLine.geometry.attributes.position.array;e[3]=this.intersects[0].point.x,e[4]=this.intersects[0].point.y,e[5]=this.intersects[0].point.z,this.dimLine.geometry.attributes.position.needsUpdate=!0;var t=new L(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z);t.name="endMarker"+this.counter,this.scene.add(t),this.lineDrawing=!1,this.pickState.flag="pick",this.renderer.domElement.style.cursor="default",1==this.counter&&(this.infoBackspaceDiv.style.display="block",this.infoBackspaceDiv.innerHTML='<span style="color:#1c5c4c; font-weight:bold">거리측정 삭제</span>')}else{this.counter=this.counter>=0?this.counter:0,this.counter++;var n=[];n.push(this.intersects[0].point),n.push(this.intersects[0].point.clone());var r=new L(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z);r.name="startMarker"+this.counter,this.scene.add(r);var i=(new o.u9r).setFromPoints(n),c=new o.nls({color:"black",depthTest:!1,depthWrite:!1});this.dimLine=new o.ejS(i,c),this.dimLine.frustumCulled=!1,this.dimLine.name="dimLine"+this.counter,this.scene.add(this.dimLine);var s=document.createElement("div");s.innerText="0.0m",s.style.fontSize="1.4rem",s.style.fontFamily="sans-serif",s.style.background="black",s.style.color="white",this.dimTextLabel=new p.j(s),this.dimTextLabel.name="dimTextLabel"+this.counter,this.dimTextLabel.position.copy(this.intersects[0].point),this.scene.add(this.dimTextLabel),this.lineDrawing=!0}}},{key:"drawing",value:function(){if(this.lineDrawing&&(ge(Oe(a.prototype),"findIntersect",this).call(this),this.intersects.length)){var e=this.dimLine.geometry.attributes.position.array,t=new o.Pa4(e[0],e[1],e[2]),n=new o.Pa4(this.intersects[0].point.x,this.intersects[0].point.y,this.intersects[0].point.z);e[3]=this.intersects[0].point.x,e[4]=this.intersects[0].point.y,e[5]=this.intersects[0].point.z,this.dimLine.geometry.attributes.position.needsUpdate=!0;var r=t.distanceTo(n);this.dimTextLabel.element.innerText=r.toFixed(2)+"m",this.dimTextLabel.position.lerpVectors(t,n,.5)}}},{key:"del",value:function(){var e=this.scene.getObjectByName("dimLine".concat(this.counter)),t=this.scene.getObjectByName("dimTextLabel".concat(this.counter)),n=this.scene.getObjectByName("startMarker".concat(this.counter)),o=this.scene.getObjectByName("endMarker".concat(this.counter));this.scene.remove(e),this.scene.remove(t),this.scene.remove(n),this.scene.remove(o),this.counter=this.counter-1,0==this.counter&&(this.infoBackspaceDiv.style.display="none")}}])&&ve(t.prototype,n),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(C);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function je(){je=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var r=t&&t.prototype instanceof p?t:p,i=Object.create(r.prototype),a=new B(o||[]);return i._invoke=function(e,t,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return S()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=l(e,t,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function p(){}function d(){}function f(){}var h={};c(h,r,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(O([])));m&&m!==t&&n.call(m,r)&&(h=m);var b=f.prototype=p.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function o(r,i,a,c){var s=l(e[r],e,i);if("throw"!==s.type){var u=s.arg,p=u.value;return p&&"object"==Ee(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var r;this._invoke=function(e,n){function i(){return new t((function(t,r){o(e,n,t,r)}))}return r=r?r.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=f,c(b,"constructor",f),c(f,"constructor",d),d.displayName=c(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(g.prototype),c(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new g(s(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(b),c(b,a,"Generator"),c(b,r,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=O,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Me(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ze(e,t,n,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){ze(i,o,r,a,c,"next",e)}function c(e){ze(i,o,r,a,c,"throw",e)}a(void 0)}))}}function Ie(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}o.u9r.prototype.computeBoundsTree=i.Xy,o.u9r.prototype.disposeBoundsTree=i.sn,o.Kj0.prototype.raycast=i.uL,function(){var e,t,n,i,h,y,m,b,v,g,w,x,k,B,O,E={menu:!0,path:"./models/",url:[],json:null,canvasID:"three-canvas",exposure:1.5,ambientLight:!0,ambientIntensity:.3,lightCamera:!0,lightCameraIntensity:1,lightScene:!0,lightSceneIntensity:1,autoRotate:!1,autoRotateSpeed:-3,mapControl:!0,navigationGizmo:!0,environment:!1,materialSide:2,castShadow:!0,receiveShadow:!1,shadowMap:!0,viewMode:"Y",gridVisible:!1,axesVisible:!1,meshListID:"listOnOff",pickColorOn:!0,boxHelperOn:!0,labelOn:!0,propContentsOn:!0,propContentsID:"propContents",raycastAcc:!1,playerRun:!0},j=[];E.url.forEach((function(e){return j.push(e)})),Ie(new URLSearchParams(window.location.search)).forEach((function(e,t){"true"==e[1]&&(e[1]=!0),"false"==e[1]&&(e[1]=!1),E[e[0]]=e[1],"url"===e[0]&&j.push(e[1]),"json"===e[0]&&(E.json,e[1])})),function(){e=document.getElementById(E.canvasID),(t=new o.CP7({canvas:e,alpha:!0,antialias:!0,logarithmicDepthBuffer:!0})).setSize(window.innerWidth,window.innerHeight),t.setPixelRatio(window.devicePixelRatio>1?2:1),t.outputEncoding=o.knz,t.toneMapping=o.LY2,t.toneMappingExposure=E.exposure,t.physicallyCorrectLights=!0,t.localClippingEnabled=!0,t.shadowMap.enabled=!0,t.shadowMap.type=2,(n=new p.M).setSize(window.innerWidth,window.innerHeight),n.domElement.style.position="absolute",n.domElement.style.top="0px",n.domElement.style.pointerEvents="none",document.body.appendChild(n.domElement),i=new o.xsS;var r=new o.cBK;B=r.setPath("./textures/").load(["px-day.png","nx-day.png","py-day.png","ny-day.png","pz-day.png","nz-day.png"]),i.environment=i.background=E.environment?B:null;var c=window.innerWidth/window.innerHeight;y=new o.cPb(75,c,.1,1e3),(m=new o.iKG(window.innerWidth/-c,window.innerWidth/c,window.innerHeight/c,window.innerHeight/-c,.1,1e3)).zoom=1,(h=y).position.set(0,5,0),i.add(h);var s=new o.Mig("white",E.ambientIntensity);E.ambientLight?i.add(s):i.remove(s),b=new o.Ox3("white",E.lightCameraIntensity),E.lightCamera?h.add(b):h.remove(b),v=new o.Ox3("white",E.lightSceneIntensity),E.lightScene?i.add(v):i.remove(v),v.castShadow=!0,v.shadow.mapSize.width=128,v.shadow.mapSize.height=128,v.shadow.radius=10,(k=new o.Kj0).name="shadowPlane",i.add(k),(x=new o.VLJ).name="gridHelper",x.visible=!1,i.add(x),(w=new o.y8_).name="axesHelper",w.visible=!1,i.add(w),(g=new a.z(h,e)).autoRotate=E.autoRotate,g.autoRotateSpeed=E.autoRotateSpeed,g.screenSpacePanning=E.mapControl,g.zoomSpeed=.5,g.rotateSpeed=.7,g.panSpeed=.7,g.mouseButtons={LEFT:o.RsA.ROTATE,MIDDLE:o.RsA.DOLLY,RIGHT:o.RsA.PAN},g.touches={ONE:o.QmN.ROTATE,TWO:o.QmN.DOLLY_PAN};var l=(new o.dpR).load("./textures/target.png"),u=new o.xeV({map:l,transparent:!0,opacity:.5,depthTest:!1,depthWrite:!1,sizeAttenuation:!1});g.addEventListener("start",(function(){var e=new o.jyi(u);e.position.copy(g.target),e.scale.set(.07,.07,.07),e.name="controlsPoint",i.add(e)})),g.addEventListener("end",(function(){var e=i.getObjectByName("controlsPoint");i.remove(e)}))}();var z=new S(h);document.body.appendChild(z),z.onAxisSelected=function(e){switch(e){case"X":r.ZP.to(h.position,{x:O.box.max.x+O.sizeBox,y:O.centerBox.y,z:O.centerBox.z,duration:1});break;case"-X":r.ZP.to(h.position,{x:O.box.min.x-O.sizeBox,y:O.centerBox.y,z:O.centerBox.z,duration:1});break;case"Y":r.ZP.to(h.position,{x:O.centerBox.x,y:O.box.max.y+O.sizeBox,z:O.centerBox.z+1e-4*O.sizeBox,duration:1,onUpdate:function(){},onComplete:function(){}});break;case"-Y":r.ZP.to(h.position,{x:O.centerBox.x,y:O.box.min.y-O.sizeBox,z:O.centerBox.z+1e-4*O.sizeBox,duration:1});break;case"Z":r.ZP.to(h.position,{x:O.centerBox.x,y:O.centerBox.y,z:O.box.max.z+O.sizeBox,duration:1});break;case"-Z":r.ZP.to(h.position,{x:O.centerBox.x,y:O.centerBox.y,z:O.box.min.z-O.sizeBox,duration:1})}h.lookAt(O.centerBox.x,O.centerBox.y,O.centerBox.z),g.target.set(O.centerBox.x,O.centerBox.y,O.centerBox.z)},document.getElementById("gizmo").style.display=E.navigationGizmo?"block":"none";var I=!1,M=[],L=[],T=[],A=[],D=new s.a;D.setTranscoderPath("./basis/").detectSupport(t);var R=new c._;R.setDecoderPath("./draco/gltf/");var _=new l.E;_.setKTX2Loader(D),_.setDRACOLoader(R),_.setMeshoptDecoder(u.z),_.setPath(E.path);var F=new o.ZAu;function H(){return(H=Ce(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return V.apply(this,arguments)}function V(){return(V=Ce(je().mark((function e(t){var n,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.loadAsync(t,(function(e){return Me(e,t)}));case 2:n=e.sent,(o=n.scene).name="glbUrlModelGroup",X(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Ce(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.forEach((function(e,t){M.push(Y(e))})),e.next=3,Promise.all(M);case 3:Qe(j[0]),I=!0;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){var t=[];e.traverse((function(e){e.isMesh&&(e.material.side=+E.materialSide,e.castShadow=E.castShadow,e.receiveShadow=E.receiveShadow,e.layers.enable(1),E.raycastAcc?e.geometry.computeBoundsTree():e.geometry.boundsTree=null,t.push(e))}));var n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});t.sort((function(e,t){return n.compare(e.name,t.name)})),t.forEach((function(e){T.push(e),A.push(e.material.map)})),T.forEach((function(e){return F.add(e)})),i.add(F),function(e){O=new U(e,E.viewMode,h,g),r.ZP.to(h.position,{x:O.centerBox.x-O.sizeBox/2,y:O.centerBox.y+O.sizeBox/2,z:O.centerBox.z+O.sizeBox/2,duration:1.5}),b.position.set(O.centerBox.x,O.box.max.y+2*O.centerBox.y,O.box.max.z),b.target.name="lightCameraTarget",b.target.position.copy(O.centerBox),b.target.updateMatrixWorld(),i.add(b.target),v.position.set(O.centerBox.x,O.box.max.y+2*O.centerBox.y,O.centerBox.z),v.target.name="lightSceneTarget",v.target.position.copy(O.centerBox),v.target.updateMatrixWorld(),i.add(v.target),v.shadow.camera.top=O.sizeBox,v.shadow.camera.bottom=-O.sizeBox,v.shadow.camera.left=-O.sizeBox,v.shadow.camera.right=O.sizeBox;new o.Rki(v.shadow.camera);i.remove(i.getObjectByName("shadowPlane"));var t=new o._12(2*O.sizeBox,2*O.sizeBox);t.rotateX(-Math.PI/2);var n=new o.Tn7({opacity:.4});(k=new o.Kj0(t,n)).name="shadowPlane",k.position.set(O.centerBox.x,O.box.min.y-2,O.centerBox.z),k.receiveShadow=E.shadowMap,i.add(k),i.remove(i.getObjectByName("gridHelper"));var a=2*O.sizeBox,c=20;(x=new o.VLJ(a,c)).name="gridHelper",x.position.x=O.centerBox.x,x.position.y=O.box.min.y-2,x.position.z=O.centerBox.z,x.visible=E.gridVisible,i.add(x),i.remove(i.getObjectByName("axesHelper")),(w=new o.y8_(O.sizeBox)).name="axesHelper",w.visible=E.axesVisible,i.add(w)}(F)}function G(){Re.meshes=_e.meshes=Fe.meshes=He.meshes=T,Re.jsonData=L,$e=!0}function K(){new N(i,T,h,g,E.meshListID),function(){document.getElementById("chkGridHelper").checked=E.gridVisible,document.getElementById("chkAxeSwitch").checked=E.axesVisible,document.getElementById("chkAutoRotate").checked=E.autoRotate,document.getElementById("chkCamera").checked=E.cameraOrthoMode,document.getElementById("chkShadow").checked=E.shadowMap,document.getElementById("chkMeshShadow").checked=E.receiveShadow,0===E.materialSide?document.getElementById("chkMeshSide").checked=!1:2===E.materialSide&&(document.getElementById("chkMeshSide").checked=!0);document.getElementById("chkEnvMap").checked=E.environment,document.getElementById("chkNaviGizmo").checked=E.navigationGizmo,document.getElementById("chkPickColor").checked=E.pickColorOn,document.getElementById("chkBoxHelper").checked=E.boxHelperOn,document.getElementById("chkLabel").checked=E.labelOn,document.getElementById("chkRaycastAcc").checked=E.raycastAcc}()}F.name="meshGroup",j.length&&function(){return W.apply(this,arguments)}().then(Ee).then(K).catch(Le),E.json&&function(e){return H.apply(this,arguments)}("./models/".concat(E.json)).then((function(e){return L.push(e)})).then((function(){})).catch((function(e){})),window.glbUrlImport=function(e){j.push(e),Y(e).then(Ee).then(G).then(K).then((function(){document.getElementById("dropdown").style.display="none"})).then((function(){})).catch(Le)};var J=document.getElementById(E.canvasID);function Q(e){return new Promise((function(t,n){_.parse(e,"",(function(e){return t(e)}),n)}))}function q(e){return $.apply(this,arguments)}function $(){return($=Ce(je().mark((function e(t){var n,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:n=e.sent,(o=n.scene).name="dragDropGlbModel",X(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Ce(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(M);case 2:I=!0;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}J.addEventListener("dragover",(function(e){e.preventDefault(),this.style.backgroundColor="lightgray"})),J.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),I=!1;var t=e.dataTransfer.files;L=[],Ie(t).forEach((function(e,t){var n,o=e,r=o.name.split(".").pop().toLowerCase();"glb"==r&&M.push((n=o,new Promise((function(e,t){var o=new FileReader;o.onload=function(){return e(o.result)},o.readAsArrayBuffer(n),o.onprogress=function(e){e.loaded&&e.total&&(ze(Math.min(e.loaded/e.total,1),n.name),Oe())}}))).then(q)),"json"==r&&function(e){return new Promise((function(t,n){var o=new FileReader;o.onload=function(){return t(o.result)},o.readAsText(e)}))}(o).then((function(e){return L.push(JSON.parse(e))}))})),function(){return ee.apply(this,arguments)}().then(Ee).then(G).then(K).catch(Le),Qe(t[0].name),this.style.backgroundColor="transparent"}));var te,ne,oe,ie,ae,ce,se=!1,le=!1,ue=new o.Pa4,pe=new o.Pa4(0,1,0),de=new o.Pa4,fe=new o.Pa4,he=new o.ZzF,me=new o.yGw,be=new o.Zzh,ve=E.playerRun?30:3,ge=0,we=[],xe={};function ke(){ue.set(0,0,0),ne.position.copy(oe),g.target.copy(ne.position);var e=h.position.clone().sub(g.target).normalize().multiplyScalar(2);e.add(ne.position),r.ZP.to(h.position,{x:e.x,y:e.y-8,z:e.z,duration:1,onUpdate:function(){},onComplete:function(){}}),g.update()}var Be=document.createElement("div");function Oe(){Be.style.display="block"}function Ee(){Be.style.display="none"}function ze(e,t){Be.innerText="".concat(t," / ")+"⚡ Loading... "+Math.round(100*e,2)+"%"}function Me(e,t){e.lengthComputable&&ze(Math.min(e.loaded/e.total,1),t);Oe()}function Le(e){Be.innerText=e}function Te(){var e=window.innerWidth/window.innerHeight;h.aspect=e,h.left=window.innerWidth/-e,h.right=window.innerWidth/e,h.top=window.innerHeight/e,h.bottom=window.innerHeight/-e,h.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight),n.render(i,h),t.setSize(window.innerWidth,window.innerHeight),t.render(i,h)}Be.id="progressBar",Be.innerhtml="Loading...",Be.style.fontSize="2.0rem",Be.style.color="black",Be.style.display="block",Be.style.position="absolute",Be.style.top="50%",Be.style.width="100%",Be.style.textAlign="center",Be.style.userSelect="none",document.body.appendChild(Be),window.addEventListener("resize",Te),document.addEventListener("keydown",(function(e){xe[e.code]=!0})),document.addEventListener("keyup",(function(e){xe[e.code]=!1,"1"===e.key&&_.load("character.glb",(function(e){(ie=e.scene).traverse((function(e){e.isMesh&&(e.castShadow=!0)})),ie.scale.set(.01,.01,.01),i.add(ie)})),"2"===e.key&&ie.position.set(5e5,0,5e5),"3"===e.key&&(h.position.set(5e5,0,5e5),g.target.set(5e5,5,5e5))}));var Ae=new P(e),De={flag:"pick"},Re=new Z(i,h,T,E.propContentsID,L);Re.pickColorOn=E.pickColorOn,Re.boxHelperOn=E.boxHelperOn,Re.labelOn=E.labelOn,Re.propContentsOn=E.propContentsOn;var _e=new Se(i,h,T,t,De);window.dist=function(){return _e.dist()};var Fe=new ye(i,h,T,t,De);window.areaCal=function(){return Fe.pick()};var He=new re(i,h,T,t,De);window.volumeCal=function(){return He.pick()};var Ye=new C(i,h,T),Ve=document.createElement("div");Ve.style.position="absolute",Ve.style.top="9rem",Ve.style.left="50%",Ve.style.display="none",Ve.style.transform="translate( -50% )",Ve.style.border="1px solid #ccc",Ve.style.borderRadius="1.9rem",Ve.style.textAlign="center",Ve.style.background="white",Ve.style.opacity="0.9",Ve.style.color="black",Ve.style.fontSize="1.4rem",Ve.style.padding="1rem",Ve.style.cursor="pointer",Ve.style.zIndex="1000",document.body.appendChild(Ve),e.addEventListener("click",(function(t){if(!Ae.mouseMoved)switch(De.flag){case"dim":_e.mouse.x=t.clientX/e.clientWidth*2-1,_e.mouse.y=-(t.clientY/e.clientHeight*2-1),_e.start();break;case"area":Fe.mouse.x=t.clientX/e.clientWidth*2-1,Fe.mouse.y=-(t.clientY/e.clientHeight*2-1),Fe.calArea();break;case"volume":He.mouse.x=t.clientX/e.clientWidth*2-1,He.mouse.y=-(t.clientY/e.clientHeight*2-1),He.calVol();break;case"firstPerson":if(Ye.mouse.x=t.clientX/e.clientWidth*2-1,Ye.mouse.y=-(t.clientY/e.clientHeight*2-1),Ye.findIntersect(),!Ye.intersects.length)return;(oe=Ye.intersects[0].point).y=oe.y+10,ke(),Ve.style.display="none",se=!0,De.flag="pick";break;case"pick":Re.mouse.x=t.clientX/e.clientWidth*2-1,Re.mouse.y=-(t.clientY/e.clientHeight*2-1),Re.pick()}})),e.addEventListener("mousemove",(function(t){"dim"===De.flag&&(t.preventDefault(),_e.mouse.x=t.clientX/e.clientWidth*2-1,_e.mouse.y=-(t.clientY/e.clientHeight*2-1),_e.drawing())}));var We,Ze,Xe,Ne,Ge,Ke,Ue=document.querySelector(".menu"),Je=document.querySelector("#gizmo");function Qe(e){var t=e.slice(0,e.indexOf(".glb"));return document.getElementById("fileName").innerText=t,t}function qe(e,t,n,r){var i,a=Pe(T);try{for(a.s();!(i=a.n()).done;){i.value.material.clippingPlanes=null}}catch(e){a.e(e)}finally{a.f()}var c=new o.Pa4(t.x,t.y,t.z);e.forEach((function(e){var t=(new o.ZzF).setFromObject(e).getCenter(new o.Pa4),i=new o.Pa4;switch(n){case"X":e.position.x=i.subVectors(t,c).multiplyScalar(r).x;break;case"Y":e.position.y=i.subVectors(t,c).multiplyScalar(r).y;break;case"Z":e.position.z=i.subVectors(t,c).multiplyScalar(r).z}}))}E.menu?(Ue.style.display="block",Je.style.top="6rem"):(Ue.style.display="none",Je.style.top="0rem"),window.dropdown=function(){"block"==document.getElementById("dropdown").style.display?document.getElementById("dropdown").style.display="none":document.getElementById("dropdown").style.display="block"},window.openTab=function(e,t){if("block"==document.getElementById(t).style.display)document.getElementById(t).style.display="none",e.currentTarget.className="tablinks";else{for(var n=document.getElementsByClassName("side"),o=0;o<n.length;o++)n[o].style.display="none";for(var r=document.getElementsByClassName("tablinks"),i=0;i<r.length;i++)r[i].className=r[i].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}},window.scaleXUp=function(e){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=null}}catch(e){n.e(e)}finally{n.f()}document.getElementById("scaleXSpan").textContent=e.target.value;var r,i=(new o.Pa4).subVectors(new o.Pa4(0,0,0),O.centerBox),a=Pe(T);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.scale.x=e.target.value,c.position.x=i.x*e.target.value-i.x}}catch(e){a.e(e)}finally{a.f()}},window.scaleYUp=function(e){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=null}}catch(e){n.e(e)}finally{n.f()}document.getElementById("scaleYSpan").textContent=e.target.value;var r,i=(new o.Pa4).subVectors(new o.Pa4(0,0,0),O.centerBox),a=Pe(T);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.scale.y=e.target.value,c.position.y=i.y*e.target.value-i.y}}catch(e){a.e(e)}finally{a.f()}},window.scaleZUp=function(e){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=null}}catch(e){n.e(e)}finally{n.f()}document.getElementById("scaleZSpan").textContent=e.target.value;var r,i=(new o.Pa4).subVectors(new o.Pa4(0,0,0),O.centerBox),a=Pe(T);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.scale.z=e.target.value,c.position.z=i.z*e.target.value-i.z}}catch(e){a.e(e)}finally{a.f()}},window.explodeXChange=function(e){qe(T,O.centerBox,"X",e.target.value)},window.explodeYChange=function(e){qe(T,O.centerBox,"Y",e.target.value)},window.explodeZChange=function(e){qe(T,O.centerBox,"Z",e.target.value)};var $e=!0,et=!1,tt=!1,nt=!1,ot=[new o.JOQ(new o.Pa4(-1,0,0),document.getElementById("rngClippingX").value),new o.JOQ(new o.Pa4(0,-1,0),document.getElementById("clippingYId").value),new o.JOQ(new o.Pa4(0,0,-1),document.getElementById("clippingZId").value)];function rt(e){g.object=e,g.target.set(O.centerBox.x,O.centerBox.y,O.centerBox.z),g.update(),z.camera=e,Re.camera=e,_e.camera=e,Fe.camera=e,He.camera=e}window.onClipping=function(e){if(e.target.checked){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){t.value.material.clippingPlanes=ot}}catch(e){n.e(e)}finally{n.f()}if(document.getElementById("clippingXGroup").style.display="flex",document.getElementById("clippingYGroup").style.display="flex",document.getElementById("clippingZGroup").style.display="flex",$e||(Ne.visible=!0,Ge.visible=!0,Ke.visible=!0),!$e)return;$e=!1,document.getElementById("rngClippingX").min=O.box.min.x-.1,document.getElementById("rngClippingX").max=O.box.max.x+.1,document.getElementById("rngClippingX").step=.01,document.getElementById("rngClippingX").value=document.getElementById("rngClippingX").max,document.getElementById("clippingYId").min=O.box.min.y-.1,document.getElementById("clippingYId").max=O.box.max.y+.1,document.getElementById("clippingYId").step=.01,document.getElementById("clippingYId").value=document.getElementById("clippingYId").max,document.getElementById("clippingZId").min=O.box.min.z-.1,document.getElementById("clippingZId").max=O.box.max.z+.1,document.getElementById("clippingZId").step=.01,document.getElementById("clippingZId").value=document.getElementById("clippingZId").max,(We=new o.tJx(ot[0],O.sizeBox,"red")).visible=!1,i.add(We),(Ze=new o.tJx(ot[1],O.sizeBox,"green")).visible=!1,i.add(Ze),(Xe=new o.tJx(ot[2],O.sizeBox,"blue")).visible=!1,i.add(Xe),ot[0].constant=document.getElementById("rngClippingX").max,ot[1].constant=document.getElementById("clippingYId").max,ot[2].constant=document.getElementById("clippingZId").max;var r=new o._12(O.sizeBox,O.sizeBox),a=r.clone();a.rotateY(Math.PI/2);var c=r.clone();c.rotateX(Math.PI/2);var s=r.clone(),l=new o.vBJ({color:"red",opacity:.2,transparent:!0,side:o.ehD}),u=new o.vBJ({color:"green",opacity:.2,transparent:!0,side:o.ehD}),p=new o.vBJ({color:"blue",opacity:.2,transparent:!0,side:o.ehD});(Ne=new o.Kj0(a,l)).position.set(ot[0].constant,O.centerBox.y,O.centerBox.z),i.add(Ne),(Ge=new o.Kj0(c,u)).position.set(O.centerBox.x,ot[1].constant,O.centerBox.z),i.add(Ge),(Ke=new o.Kj0(s,p)).position.set(O.centerBox.x,O.centerBox.y,ot[2].constant),i.add(Ke),Ne.updateMatrixWorld()}else document.getElementById("clippingXGroup").style.display="none",document.getElementById("clippingYGroup").style.display="none",document.getElementById("clippingZGroup").style.display="none",We.visible=!1,Ze.visible=!1,Xe.visible=!1,i.remove(We),i.remove(Ze),i.remove(Xe),Ne.visible=!1,Ge.visible=!1,Ke.visible=!1},window.clippingXSlide=function(e){et?(ot[0].constant=-e.target.value,Ne.position.set(-e.target.value,O.centerBox.y,O.centerBox.z)):(ot[0].constant=e.target.value,Ne.position.set(e.target.value,O.centerBox.y,O.centerBox.z))},window.clippingYSlide=function(e){tt?(ot[1].constant=-e.target.value,Ge.position.set(O.centerBox.x,-e.target.value,O.centerBox.z)):(ot[1].constant=e.target.value,Ge.position.set(O.centerBox.x,e.target.value,O.centerBox.z))},window.clippingZSlide=function(e){nt?(ot[2].constant=-e.target.value,Ke.position.set(O.centerBox.x,O.centerBox.y,-e.target.value)):(ot[2].constant=e.target.value,Ke.position.set(O.centerBox.x,O.centerBox.y,e.target.value))},window.negateXSwitch=function(e){e.target.checked?(ot[0].negate(),et=!0):(ot[0].negate(),et=!1)},window.negateYSwitch=function(e){e.target.checked?(ot[1].negate(),tt=!0):(ot[1].negate(),tt=!1)},window.negateZSwitch=function(e){e.target.checked?(ot[2].negate(),nt=!0):(ot[2].negate(),nt=!1)},window.firstPersonSwitch=function(e){if(se)ne.visible=!1,se=!1,r.ZP.to(h.position,{x:g.object.position.x-O.sizeBox/32,y:g.object.position.y+O.sizeBox/32,z:g.object.position.z+O.sizeBox/32,duration:1});else{if(De.flag="firstPerson",setTimeout((function(){Ve.style.display="block",Ve.innerHTML='<span style="color:#1c5c4c; font-weight:bold">1인칭 시점을 시작할 장소를 클릭하세요</span>'}),0),te)return;Ve.style.display="block",Ve.innerHTML='<span style="color:#1c5c4c; font-weight:bold">1인칭 시점 생성중</span>',setTimeout((function(){var e=[];F.updateMatrixWorld(!0),F.traverse((function(t){if(t.geometry){var n=t.geometry.clone();for(var o in n.applyMatrix4(t.matrixWorld),n.attributes)"position"!==o&&n.deleteAttribute(o);e.push(n)}}));var t=d.qf(e,!1);t.computeBoundsTree(),(te=new o.Kj0(t)).name="collider",te.material.wireframe=!1,te.visible=!1,i.add(te)}),0),(ne=new o.Kj0(new f.k(1,2,1,10,.5),new o.Wid)).geometry.translate(0,-.5,0),ne.capsuleInfo={radius:.5,segment:new o.Zzh(new o.Pa4,new o.Pa4(0,-1,0))},ne.name="player",ne.castShadow=!0,ne.receiveShadow=!0,ne.material.shadowSide=2,ne.material.wireframe=!0,ne.visible=!1,i.add(ne),_.load("characterAnimation_kd.glb",(function(e){(ie=e.scene).traverse((function(e){e.isMesh&&(e.castShadow=!0)})),ie.scale.set(.01,.01,.01),ie.position.copy(ne.position),ie.animations=e.animations,ae=new o.Xcj(ie),we[0]=ae.clipAction(ie.animations[0]),we[1]=ae.clipAction(ie.animations[1]),we[2]=ae.clipAction(ie.animations[2]),we[3]=ae.clipAction(ie.animations[3]),we[4]=ae.clipAction(ie.animations[4]),ce=we[4],i.add(ie)}))}},window.wireframeSwitch=function(e){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){t.value.material.wireframe=!!e.target.checked}}catch(e){n.e(e)}finally{n.f()}},window.solidSwitch=function(e){e.target.checked?T.forEach((function(e){e.material.map=null,e.material.needsUpdate=!0})):T.forEach((function(e,t){e.material.map=A[t],e.material.needsUpdate=!0}))},window.gridHelperSwith=function(e){x.visible=!!e.target.checked},window.axeSwitch=function(e){w.visible=!!e.target.checked},window.autoRotateSwitch=function(e){g.autoRotate=!!e.target.checked},window.cameraSwitch=function(){h.isPerspectiveCamera?(m.near=.001,m.far=y.far,m.zoom=.4*Math.min(window.innerWidth/(O.box.max.x-O.box.min.x),window.innerHeight/(O.box.max.y-O.box.min.y)),(h=m).position.copy(y.position),h.updateProjectionMatrix(),rt(h),Te()):h.isOrthographicCamera&&((h=y).position.copy(m.position),h.updateProjectionMatrix(),rt(h),Te())},window.shadowSwitch=function(e){k.receiveShadow=!!e.target.checked},window.meshShadowSwitch=function(e){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){t.value.receiveShadow=!!e.target.checked}}catch(e){n.e(e)}finally{n.f()}},window.meshSideSwitch=function(e){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.material.side=e.target.checked?2:0,o.material.needsUpdate=!0}}catch(e){n.e(e)}finally{n.f()}},window.mapControlSwitch=function(e){g.screenSpacePanning=!e.target.checked},window.envMapSwitch=function(e){i.background=i.environment=e.target.checked?B:null},document.getElementById("exposureId").value=E.exposure,document.getElementById("exposureSpanId").textContent=E.exposure,window.exposureChange=function(e){t.toneMappingExposure=e.target.value,document.getElementById("exposureSpanId").textContent=e.target.value},window.navigationGizmoSwith=function(e){document.getElementById("gizmo").style.display=e.target.checked?"block":"none"},window.pickColorSwith=function(e){Re.pickColorOn=!!e.target.checked},window.boxHelperSwith=function(e){Re.boxHelperOn=!!e.target.checked},window.labelSwith=function(e){Re.labelOn=!!e.target.checked},window.raycastAccSwitch=function(e){var t,n=Pe(T);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.target.checked?o.geometry.computeBoundsTree():o.geometry.boundsTree=null}}catch(e){n.e(e)}finally{n.f()}};var it=new o.SUY,at=[];!function e(){var r=it.getDelta(),a=it.getElapsedTime();if(document.getElementById("cameraPostionX").textContent=h.position.x.toFixed(2),document.getElementById("cameraPostionY").textContent=h.position.y.toFixed(2),document.getElementById("cameraPostionZ").textContent=h.position.z.toFixed(2),document.getElementById("orbitControlX").textContent=g.target.x.toFixed(2),document.getElementById("orbitControlY").textContent=g.target.y.toFixed(2),document.getElementById("orbitControlZ").textContent=g.target.z.toFixed(2),ae){ae.update(r);var c=Math.atan2(h.position.x-ne.position.x,h.position.z-ne.position.z)+Math.PI,s=new o._fP;s.setFromAxisAngle(new o.Pa4(0,1,0),c+ge),ie.quaternion.rotateTowards(s,o.M8C.degToRad(5)),ie.position.copy(ne.position),ie.position.sub(new o.Pa4(0,.6077,0))}g.update(),z.update(),t.setAnimationLoop(e),t.render(i,h),n.render(i,h);for(;at.length>0&&at[0]<=a-1;)at.shift();if(at.push(a),document.getElementById("renderCalls").textContent=t.info.render.calls.toLocaleString("ko-KR"),document.getElementById("renderTriangles").textContent=t.info.render.triangles.toLocaleString("ko-KR"),document.getElementById("renderGeometries").textContent=t.info.memory.geometries.toLocaleString("ko-KR"),document.getElementById("renderTextures").textContent=t.info.memory.textures.toLocaleString("ko-KR"),document.getElementById("renderFps").textContent=at.length,t.info.reset(),!I)return;if(se){if(!te)return;g.maxPolarAngle=Math.PI/2,function(e){ue.y+=le?0:-30*e,ne.position.addScaledVector(ue,e);var t=g.getAzimuthalAngle(),n=ce;ce=we[0],xe.KeyW&&(de.set(0,0,-1).applyAxisAngle(pe,t),ne.position.addScaledVector(de,ve*e),ge=0,ce=E.playerRun?we[2]:we[1]),xe.KeyS&&(de.set(0,0,1).applyAxisAngle(pe,t),ne.position.addScaledVector(de,ve*e),ge=Math.PI,ce=E.playerRun?we[2]:we[1]),xe.KeyA&&(de.set(-1,0,0).applyAxisAngle(pe,t),ne.position.addScaledVector(de,ve*e),ge=Math.PI/2,ce=E.playerRun?we[2]:we[1]),xe.KeyD&&(de.set(1,0,0).applyAxisAngle(pe,t),ne.position.addScaledVector(de,ve*e),ge=-Math.PI/2,ce=E.playerRun?we[2]:we[1]),ue.y<-8&&(ce=we[3]),xe.Space&&le&&(ue.y=15),n!==ce&&(n.fadeOut(.5),ce.reset().fadeIn(.1).play()),ne.updateMatrixWorld();var o=ne.capsuleInfo;he.makeEmpty(),me.copy(te.matrixWorld).invert(),be.copy(o.segment),be.start.applyMatrix4(ne.matrixWorld).applyMatrix4(me),be.end.applyMatrix4(ne.matrixWorld).applyMatrix4(me),he.expandByPoint(be.start),he.expandByPoint(be.end),he.min.addScalar(-o.radius),he.max.addScalar(o.radius),te.geometry.boundsTree.shapecast({intersectsBounds:function(e){return e.intersectsBox(he)},intersectsTriangle:function(e){var t=de,n=fe,r=e.closestPointToSegment(be,t,n);if(r<o.radius){var i=o.radius-r,a=n.sub(t).normalize();be.start.addScaledVector(a,i),be.end.addScaledVector(a,i)}}});var r=de;r.copy(be.start).applyMatrix4(te.matrixWorld);var i=fe;i.subVectors(r,ne.position),le=i.y>Math.abs(e*ue.y*.25);var a=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(a),ne.position.add(i),le?ue.set(0,0,0):(i.normalize(),ue.addScaledVector(i,-i.dot(ue))),h.position.sub(g.target),g.target.copy(ne.position),h.position.add(ne.position),ne.position.y<-25&&ke()}(r)}else g.maxPolarAngle=Math.PI,function(){var e=g.target.distanceTo(g.object.position),t=g.minDistanceSettingValue;if(e<t){var n=g.object.position,r=g.target,i=new o.Pa4,a=3;r.copy(i.subVectors(r,n).normalize().multiplyScalar(a).add(r)),g.update()}document.getElementById("DistanceCamera").textContent=e.toFixed(2)+" > "+t.toFixed(2)}()}()}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,i]=e[u],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[a,c,s]=n,l=0;if(a.some((t=>0!==e[t]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(s)var u=s(o)}for(t&&t(n);l<a.length;l++)i=a[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self.webpackChunkweb_viewer=self.webpackChunkweb_viewer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[760],(()=>o(4636)));r=o.O(r)})();